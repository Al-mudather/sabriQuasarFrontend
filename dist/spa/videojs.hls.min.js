/*! videojs-contrib-hls - v1.3.12 - 2016-04-07
* Copyright (c) 2016 Brightcove; Licensed  */
!function(t,e,i){var a=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.off=function(e,i){var a;return!!t[e]&&(a=t[e].indexOf(i),t[e].splice(a,1),a>-1)},this.trigger=function(e){var i,a,s,n;if(i=t[e])if(2===arguments.length)for(s=i.length,a=0;s>a;++a)i[a].call(this,arguments[1]);else{for(n=[],a=arguments.length,a=1;a<arguments.length;++a)n.push(arguments[a]);for(s=i.length,a=0;s>a;++a)i[a].apply(this,n)}},this.dispose=function(){t={}}}};a.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(){t.flush()})),t},a.prototype.push=function(t){this.trigger("data",t)},a.prototype.flush=function(){this.trigger("done")},t.muxjs=t.muxjs||{},t.muxjs.utils=t.muxjs.utils||{},t.muxjs.utils.Stream=a}(this,this.muxjs),function(t,e){var i;i=function(t){var e=t.byteLength,i=0,a=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+a},this.loadWord=function(){var s=t.byteLength-e,n=new Uint8Array(4),r=Math.min(4,e);if(0===r)throw new Error("no bytes available");n.set(t.subarray(s,s+r)),i=new DataView(n.buffer).getUint32(0),a=8*r,e-=r},this.skipBits=function(t){var s;a>t?(i<<=t,a-=t):(t-=a,s=Math.floor(t/8),t-=8*s,e-=s,this.loadWord(),i<<=t,a-=t)},this.readBits=function(t){var s=Math.min(a,t),n=i>>>32-s;return console.assert(32>t,"Cannot read more than 32 bits at a time"),a-=s,a>0?i<<=s:e>0&&this.loadWord(),s=t-s,s>0?n<<s|this.readBits(s):n},this.skipLeadingZeros=function(){var t;for(t=0;a>t;++t)if(0!==(i&2147483648>>>t))return i<<=t,a-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},t.muxjs=e||{},e.utils=e.utils||{},e.utils.ExpGolomb=i}(this,this.muxjs),function(t,e){"use strict";var i,a=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];i=function(){var t;i.prototype.init.call(this),this.push=function(e){var i,s,n,r,o,d,h=0,u=0;if("audio"===e.type)for(t?(r=t,t=new Uint8Array(r.byteLength+e.data.byteLength),t.set(r),t.set(e.data,r.byteLength)):t=e.data;h+5<t.length;)if(255===t[h]&&240===(246&t[h+1])){if(s=2*(1&~t[h+1]),i=(3&t[h+3])<<11|t[h+4]<<3|(224&t[h+5])>>5,o=1024*(1+(3&t[h+6])),d=9e4*o/a[(60&t[h+2])>>>2],n=h+i,t.byteLength<n)return;if(this.trigger("data",{pts:e.pts+u*d,dts:e.dts+u*d,sampleCount:o,audioobjecttype:1+(t[h+2]>>>6&3),channelcount:(1&t[h+2])<<3|(192&t[h+3])>>>6,samplerate:a[(60&t[h+2])>>>2],samplingfrequencyindex:(60&t[h+2])>>>2,samplesize:16,data:t.subarray(h+7+s,n)}),t.byteLength===n)return void(t=void 0);u++,t=t.subarray(n)}else h++}},i.prototype=new e.utils.Stream,e.codecs=e.codecs||{},e.codecs.AacStream=i}(0,this.muxjs),function(t,e){"use strict";var i,a;a=function(){var t,e,i=0;a.prototype.init.call(this),this.push=function(a){var s;for(e?(s=new Uint8Array(e.byteLength+a.data.byteLength),s.set(e),s.set(a.data,e.byteLength),e=s):e=a.data;i<e.byteLength-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<e.byteLength;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}this.trigger("data",e.subarray(i+3,t-2));do{t++}while(1!==e[t]&&t<e.length);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")}},a.prototype=new e.utils.Stream,i=function(){var t,s,n,r,o,d,h,u=new a;i.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(s=t.trackId,n=t.pts,r=t.dts,u.push(t))},u.on("data",(function(e){var i={trackId:s,pts:n,dts:r,data:e};switch(31&e[0]){case 5:i.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:i.nalUnitType="sei_rbsp",i.escapedRBSP=o(e.subarray(1));break;case 7:i.nalUnitType="seq_parameter_set_rbsp",i.escapedRBSP=o(e.subarray(1)),i.config=d(i.escapedRBSP);break;case 8:i.nalUnitType="pic_parameter_set_rbsp";break;case 9:i.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",i)})),u.on("done",(function(){t.trigger("done")})),this.flush=function(){u.flush()},h=function(t,e){var i,a,s=8,n=8;for(i=0;t>i;i++)0!==n&&(a=e.readExpGolomb(),n=(s+a+256)%256),s=0===n?s:n},o=function(t){for(var e,i,a=t.byteLength,s=[],n=1;a-2>n;)0===t[n]&&0===t[n+1]&&3===t[n+2]?(s.push(n+2),n+=2):n++;if(0===s.length)return t;e=a-s.length,i=new Uint8Array(e);var r=0;for(n=0;e>n;r++,n++)r===s[0]&&(r++,s.shift()),i[n]=t[r];return i},d=function(t){var i,a,s,n,r,o,d,u,c,p,f,l,g=0,m=0,b=0,y=0;if(i=new e.utils.ExpGolomb(t),a=i.readUnsignedByte(),n=i.readUnsignedByte(),s=i.readUnsignedByte(),i.skipUnsignedExpGolomb(),(100===a||110===a||122===a||244===a||44===a||83===a||86===a||118===a||128===a||138===a||139===a||134===a)&&(r=i.readUnsignedExpGolomb(),3===r&&i.skipBits(1),i.skipUnsignedExpGolomb(),i.skipUnsignedExpGolomb(),i.skipBits(1),i.readBoolean()))for(f=3!==r?8:12,l=0;f>l;l++)i.readBoolean()&&h(6>l?16:64,i);if(i.skipUnsignedExpGolomb(),o=i.readUnsignedExpGolomb(),0===o)i.readUnsignedExpGolomb();else if(1===o)for(i.skipBits(1),i.skipExpGolomb(),i.skipExpGolomb(),d=i.readUnsignedExpGolomb(),l=0;d>l;l++)i.skipExpGolomb();return i.skipUnsignedExpGolomb(),i.skipBits(1),u=i.readUnsignedExpGolomb(),c=i.readUnsignedExpGolomb(),p=i.readBits(1),0===p&&i.skipBits(1),i.skipBits(1),i.readBoolean()&&(g=i.readUnsignedExpGolomb(),m=i.readUnsignedExpGolomb(),b=i.readUnsignedExpGolomb(),y=i.readUnsignedExpGolomb()),{profileIdc:a,levelIdc:s,profileCompatibility:n,width:16*(u+1)-2*g-2*m,height:(2-p)*(c+1)*16-2*b-2*y}}},i.prototype=new e.utils.Stream,e.codecs=e.codecs||{},e.codecs.H264Stream=i,e.codecs.NalByteStream=a}(0,this.muxjs),function(t,e,i){"use strict";var a,s,n,r,o,d,h,u;r=188,u=71,o=27,d=15,h=21,a=function(){var t=new Uint8Array(r),e=0;a.prototype.init.call(this),this.push=function(i){var a,s=0,n=r;for(e?(a=new Uint8Array(i.byteLength+e),a.set(t.subarray(0,e)),a.set(i,e),e=0):a=i;n<a.byteLength;)a[s]!==u||a[n]!==u?(s++,n++):(this.trigger("data",a.subarray(s,n)),s+=r,n+=r);s<a.byteLength&&(t.set(a.subarray(s),0),e=a.byteLength-s)},this.flush=function(){e===r&&t[0]===u&&(this.trigger("data",t),e=0),this.trigger("done")}},a.prototype=new e.utils.Stream,s=function(){var t,e,a,n;s.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=i,t=function(t,i){var s=0;i.payloadUnitStartIndicator&&(s+=t[s]+1),"pat"===i.type?e(t.subarray(s),i):a(t.subarray(s),i)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},a=function(t,e){var i,a,s,r;if(1&t[5]){for(n.programMapTable={},i=(15&t[1])<<8|t[2],a=3+i-4,s=(15&t[10])<<8|t[11],r=12+s;a>r;)n.programMapTable[(31&t[r+1])<<8|t[r+2]]=t[r],r+=5+((15&t[r+3])<<8|t[r+4]);for(e.programMapTable=n.programMapTable;n.packetsWaitingForPmt.length;)n.processPes_.apply(n,n.packetsWaitingForPmt.shift())}},this.push=function(e){var a={},s=4;a.payloadUnitStartIndicator=!!(64&e[1]),a.pid=31&e[1],a.pid<<=8,a.pid|=e[2],(48&e[3])>>>4>1&&(s+=e[s]+1),0===a.pid?(a.type="pat",t(e.subarray(s),a),this.trigger("data",a)):a.pid===this.pmtPid?(a.type="pmt",t(e.subarray(s),a),this.trigger("data",a)):this.programMapTable===i?this.packetsWaitingForPmt.push([e,s,a]):this.processPes_(e,s,a)},this.processPes_=function(t,e,i){i.streamType=this.programMapTable[i.pid],i.type="pes",i.data=t.subarray(e),this.trigger("data",i)}},s.prototype=new e.utils.Stream,s.STREAM_TYPES={h264:27,adts:15},n=function(){var t,e={data:[],size:0},i={data:[],size:0},a={data:[],size:0},s=function(t,e){var i;e.dataAlignmentIndicator=0!==(4&t[6]),i=t[7],192&i&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&i&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),e.data=t.subarray(9+t[8])},r=function(e,i){var a,n=new Uint8Array(e.size),r={type:i},o=0;if(e.data.length){for(r.trackId=e.data[0].pid;e.data.length;)a=e.data.shift(),n.set(a.data,o),o+=a.data.byteLength;s(n,r),e.size=0,t.trigger("data",r)}};n.prototype.init.call(this),t=this,this.push=function(s){({pat:function(){},pes:function(){var t,n;switch(s.streamType){case o:t=e,n="video";break;case d:t=i,n="audio";break;case h:t=a,n="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&r(t,n),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var e,i,a={type:"metadata",tracks:[]},n=s.programMapTable;for(e in n)n.hasOwnProperty(e)&&(i={timelineStartInfo:{baseMediaDecodeTime:0}},i.id=+e,n[e]===o?(i.codec="avc",i.type="video"):n[e]===d&&(i.codec="adts",i.type="audio"),a.tracks.push(i));t.trigger("data",a)}})[s.type]()},this.flush=function(){r(e,"video"),r(i,"audio"),r(a,"timed-metadata"),this.trigger("done")}},n.prototype=new e.utils.Stream,e.mp2t=e.mp2t||{},e.mp2t.PAT_PID=0,e.mp2t.MP2T_PACKET_LENGTH=r,e.mp2t.H264_STREAM_TYPE=o,e.mp2t.ADTS_STREAM_TYPE=d,e.mp2t.METADATA_STREAM_TYPE=h,e.mp2t.TransportPacketStream=a,e.mp2t.TransportParseStream=s,e.mp2t.ElementaryStream=n}(0,this.muxjs),function(t,e){"use strict";var i;i=function(t,e){var a,s=0,n=16384,r=function(t,e){var i,a=t.position+e;a<t.bytes.byteLength||(i=new Uint8Array(2*a),i.set(t.bytes.subarray(0,t.position),0),t.bytes=i,t.view=new DataView(t.bytes.buffer))},o=i.widthBytes||new Uint8Array(5),d=i.heightBytes||new Uint8Array(6),h=i.videocodecidBytes||new Uint8Array(12);if(!i.widthBytes){for(a=0;a<5;a++)o[a]="width".charCodeAt(a);for(a=0;a<6;a++)d[a]="height".charCodeAt(a);for(a=0;a<12;a++)h[a]="videocodecid".charCodeAt(a);i.widthBytes=o,i.heightBytes=d,i.videocodecidBytes=h}switch(this.keyFrame=!1,t){case i.VIDEO_TAG:this.length=16,n*=6;break;case i.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case i.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(n),this.view=new DataView(this.bytes.buffer),this.bytes[0]=t,this.position=this.length,this.keyFrame=e,this.pts=0,this.dts=0,this.writeBytes=function(t,e,i){var a,s=e||0;i=i||t.byteLength,a=s+i,r(this,i),this.bytes.set(t.subarray(s,a),this.position),this.position+=i,this.length=Math.max(this.length,this.position)},this.writeByte=function(t){r(this,1),this.bytes[this.position]=t,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(t){r(this,2),this.view.setUint16(this.position,t),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(t){return this.bytes[this.length-t]},this.nalUnitSize=function(){return 0===s?0:this.length-(s+4)},this.startNalUnit=function(){if(s>0)throw new Error("Attempted to create new NAL wihout closing the old one");s=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(t){var e,i;this.length===s+4?this.length-=4:s>0&&(e=s+4,i=this.length-e,this.position=s,this.view.setUint32(this.position,i),this.position=this.length,t&&t.push(this.bytes.subarray(e,e+i))),s=0},this.writeMetaDataDouble=function(t,e){var i;if(r(this,2+t.length+9),this.view.setUint16(this.position,t.length),this.position+=2,"width"===t)this.bytes.set(o,this.position),this.position+=5;else if("height"===t)this.bytes.set(d,this.position),this.position+=6;else if("videocodecid"===t)this.bytes.set(h,this.position),this.position+=12;else for(i=0;i<t.length;i++)this.bytes[this.position]=t.charCodeAt(i),this.position++;this.position++,this.view.setFloat64(this.position,e),this.position+=8,this.length=Math.max(this.length,this.position),++s},this.writeMetaDataBoolean=function(t,e){var i;for(r(this,2),this.view.setUint16(this.position,t.length),this.position+=2,i=0;i<t.length;i++)console.assert(t.charCodeAt(i)<255),r(this,1),this.bytes[this.position]=t.charCodeAt(i),this.position++;r(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,e?1:0),this.position++,this.length=Math.max(this.length,this.position),++s},this.finalize=function(){var t,a;switch(this.bytes[0]){case i.VIDEO_TAG:this.bytes[11]=7|(this.keyFrame||e?16:32),this.bytes[12]=e?0:1,t=this.pts-this.dts,this.bytes[13]=(16711680&t)>>>16,this.bytes[14]=(65280&t)>>>8,this.bytes[15]=(255&t)>>>0;break;case i.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=e?0:1;break;case i.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,s),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return a=this.length-11,this.bytes[1]=(16711680&a)>>>16,this.bytes[2]=(65280&a)>>>8,this.bytes[3]=(255&a)>>>0,this.bytes[4]=(16711680&this.dts)>>>16,this.bytes[5]=(65280&this.dts)>>>8,this.bytes[6]=(255&this.dts)>>>0,this.bytes[7]=(4278190080&this.dts)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,r(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=i.frameTime(this.bytes),console.assert(this.bytes.byteLength===this.length),this}},i.AUDIO_TAG=8,i.VIDEO_TAG=9,i.METADATA_TAG=18,i.isAudioFrame=function(t){return i.AUDIO_TAG===t[0]},i.isVideoFrame=function(t){return i.VIDEO_TAG===t[0]},i.isMetaData=function(t){return i.METADATA_TAG===t[0]},i.isKeyFrame=function(t){return i.isVideoFrame(t)?23===t[11]:!!i.isAudioFrame(t)||!!i.isMetaData(t)},i.frameTime=function(t){var e=t[4]<<16;return e|=t[5]<<8,e|=t[6]<<0,e|t[7]<<24},e.flv=e.flv||{},e.flv.FlvTag=i}(0,this.muxjs),function(t,e,i){"use strict";var a,s=function(t,e,i){var a,s="";for(a=e;i>a;a++)s+="%"+("00"+t[a].toString(16)).slice(-2);return s},n=function(e,i,a){return t.decodeURIComponent(s(e,i,a))},r=function(e,i,a){return t.unescape(s(e,i,a))},o=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},d={TXXX:function(t){var e;if(3===t.data[0]){for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=n(t.data,1,e),t.value=n(t.data,e+1,t.data.length-1);break}t.data=t.value}},WXXX:function(t){var e;if(3===t.data[0])for(e=1;e<t.data.length;e++)if(0===t.data[e]){t.description=n(t.data,1,e),t.url=n(t.data,e+1,t.data.length);break}},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=r(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}};a=function(t){var i,s={debug:!(!t||!t.debug),descriptor:t&&t.descriptor},n=0,r=[],h=0;if(a.prototype.init.call(this),this.dispatchType=e.mp2t.METADATA_STREAM_TYPE.toString(16),s.descriptor)for(i=0;i<s.descriptor.length;i++)this.dispatchType+=("00"+s.descriptor[i].toString(16)).slice(-2);this.push=function(t){var e,i,a,u,c;if("timed-metadata"===t.type){if(t.dataAlignmentIndicator&&(h=0,r.length=0),0===r.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))return void(s.debug&&console.log("Skipping unrecognized metadata packet"));if(r.push(t),h+=t.data.byteLength,1===r.length&&(n=o(t.data.subarray(6,10)),n+=10),!(n>h)){for(e={data:new Uint8Array(n),frames:[],pts:r[0].pts,dts:r[0].dts},c=0;n>c;)e.data.set(r[0].data.subarray(0,n-c),c),c+=r[0].data.byteLength,h-=r[0].data.byteLength,r.shift();i=10,64&e.data[5]&&(i+=4,i+=o(e.data.subarray(10,14)),n-=o(e.data.subarray(16,20)));do{if(a=o(e.data.subarray(i+4,i+8)),1>a)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");u={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+a+10)},u.key=u.id,d[u.id]&&d[u.id](u),e.frames.push(u),i+=10,i+=a}while(n>i);this.trigger("data",e)}}}},a.prototype=new e.utils.Stream,e.mp2t=e.mp2t||{},e.mp2t.MetadataStream=a}(this,this.muxjs),function(t,e,i){"use strict";var a=4,s=128,n=function(t){for(var e=0,i={payloadType:-1,payloadSize:0},n=0,r=0;e<t.byteLength&&t[e]!==s;){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)r+=255,e++;if(r+=t[e++],!i.payload&&n===a){i.payloadType=n,i.payloadSize=r,i.payload=t.subarray(e,e+r);break}e+=r,n=0,r=0}return i},r=function(t){return 181!==t.payload[0]||49!==(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},o=function(t,e){var i,a,s,n,r=[];if(!(64&e[0]))return r;for(a=31&e[0],i=0;a>i;i++)s=3*i,n={type:3&e[s+2],pts:t},4&e[s+2]&&(n.ccData=e[s+3]<<8|e[s+4],r.push(n));return r},d=function(){d.prototype.init.call(this),this.captionPackets_=[],this.field1_=new T,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};d.prototype=new e.utils.Stream,d.prototype.push=function(t){var e,i;"sei_rbsp"===t.nalUnitType&&(e=n(t.escapedRBSP),e.payloadType===a&&(i=r(e),i&&(this.captionPackets_=this.captionPackets_.concat(o(t.pts,i)))))},d.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.sort((function(t,e){return t.pts-e.pts})),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var h={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},u=0,c=5152,p=5167,f=5157,l=5158,g=5159,m=5165,b=5153,y=5164,_=5166,v=14,S=function(){for(var t=[],e=v+1;e--;)t.push("");return t},T=function(){T.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=S(),this.nonDisplayed_=S(),this.lastControlCode_=null,this.push=function(t){var e,i,a,s;if(e=32639&t.ccData,e!==this.lastControlCode_)switch(this.lastControlCode_=4096===(61440&e)?e:null,e){case u:break;case c:this.mode_="popOn";break;case p:this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,this.startPts_=t.pts;break;case f:this.topRow_=v-1,this.mode_="rollUp";break;case l:this.topRow_=v-2,this.mode_="rollUp";break;case g:this.topRow_=v-3,this.mode_="rollUp";break;case m:this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;break;case b:"popOn"===this.mode_?this.nonDisplayed_[v]=this.nonDisplayed_[v].slice(0,-1):this.displayed_[v]=this.displayed_[v].slice(0,-1);break;case y:this.flushDisplayed(t.pts),this.displayed_=S();break;case _:this.nonDisplayed_=S();break;default:if(a=e>>>8,s=255&e,a>=16&&23>=a&&s>=64&&127>=s&&(16!==a||96>s)&&(a=s=32),16===(240&a))return;this[this.mode_](t.pts,a,s)}else this.lastControlCode_=null}};T.prototype=new e.utils.Stream,T.prototype.flushDisplayed=function(t){var e,i;for(i=0;i<this.displayed_.length;i++)e=this.displayed_[i],e.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:e})},T.prototype.popOn=function(t,e,i){var a=this.nonDisplayed_[v];e=h[e]||e,a+=String.fromCharCode(e),i=h[i]||i,a+=String.fromCharCode(i),this.nonDisplayed_[v]=a},T.prototype.rollUp=function(t,e,i){var a=this.displayed_[v];""===a&&(this.flushDisplayed(t),this.startPts_=t),e=h[e]||e,a+=String.fromCharCode(e),i=h[i]||i,a+=String.fromCharCode(i),this.displayed_[v]=a},T.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.topRow_;v>t;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[v]=""},e.mp2t=e.mp2t||{},e.mp2t.CaptionStream=d,e.mp2t.Cea608Stream=T}(0,this.muxjs),function(t,e){"use strict";var i,a,s,n,r,o,d,h=e.flv.FlvTag;e.MetadataStream,r=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts?t.timelineStartInfo.pts=e.pts:t.timelineStartInfo.pts=Math.min(t.timelineStartInfo.pts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts?t.timelineStartInfo.dts=e.dts:t.timelineStartInfo.dts=Math.min(t.timelineStartInfo.dts,e.dts))},o=function(t,e){var i=new h(h.METADATA_TAG);return i.dts=e,i.pts=e,i.writeMetaDataDouble("videocodecid",7),i.writeMetaDataDouble("width",t.width),i.writeMetaDataDouble("height",t.height),i},d=function(t,e){var i,a=new h(h.VIDEO_TAG,!0);for(a.dts=e,a.pts=e,a.writeByte(1),a.writeByte(t.profileIdc),a.writeByte(t.profileCompatibility),a.writeByte(t.levelIdc),a.writeByte(255),a.writeByte(225),a.writeShort(t.sps[0].length),a.writeBytes(t.sps[0]),a.writeByte(t.pps.length),i=0;i<t.pps.length;++i)a.writeShort(t.pps[i].length),a.writeBytes(t.pps[i]);return a},s=function(t){var e,i=[];s.prototype.init.call(this),this.push=function(e){r(t,e),t&&void 0===t.channelcount&&(t.audioobjecttype=e.audioobjecttype,t.channelcount=e.channelcount,t.samplerate=e.samplerate,t.samplingfrequencyindex=e.samplingfrequencyindex,t.samplesize=e.samplesize,t.extraData=t.audioobjecttype<<11|t.samplingfrequencyindex<<7|t.channelcount<<3),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),i.push(e)},this.flush=function(){var a,s,n,r=[];if(0!==i.length){for(n=-1/0;i.length;)a=i.shift(),(t.extraData!==e||a.pts-n>=1e3)&&(s=new h(h.METADATA_TAG),s.pts=a.pts,s.dts=a.dts,s.writeMetaDataDouble("audiocodecid",10),s.writeMetaDataBoolean("stereo",2===t.channelcount),s.writeMetaDataDouble("audiosamplerate",t.samplerate),s.writeMetaDataDouble("audiosamplesize",16),r.push(s),e=t.extraData,s=new h(h.AUDIO_TAG,!0),s.pts=a.pts,s.dts=a.dts,s.view.setUint16(s.position,t.extraData),s.position+=2,s.length=Math.max(s.length,s.position),r.push(s),n=a.pts),s=new h(h.AUDIO_TAG),s.pts=a.pts,s.dts=a.dts,s.writeBytes(a.data),r.push(s);e=null,this.trigger("data",{track:t,tags:r}),this.trigger("done")}else this.trigger("done")}},s.prototype=new e.utils.Stream,a=function(t){var e,i,s=[];a.prototype.init.call(this),this.finishFrame=function(i,a){a&&(t.newMetadata&&(a.keyFrame||0===i.length)&&(i.push(o(e,a.pts)),i.push(d(t,a.pts)),t.newMetadata=!1),a.endNalUnit(),i.push(a))},this.push=function(e){r(t,e),e.pts=Math.round(e.pts/90),e.dts=Math.round(e.dts/90),s.push(e)},this.flush=function(){for(var a,n=[];s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0!==s.length){for(;s.length;)a=s.shift(),"seq_parameter_set_rbsp"===a.nalUnitType?(t.newMetadata=!0,e=a.config,t.width=e.width,t.height=e.height,t.sps=[a.data],t.profileIdc=e.profileIdc,t.levelIdc=e.levelIdc,t.profileCompatibility=e.profileCompatibility,i.endNalUnit()):"pic_parameter_set_rbsp"===a.nalUnitType?(t.newMetadata=!0,t.pps=[a.data],i.endNalUnit()):"access_unit_delimiter_rbsp"===a.nalUnitType?(i&&this.finishFrame(n,i),i=new h(h.VIDEO_TAG),i.pts=a.pts,i.dts=a.dts):("slice_layer_without_partitioning_rbsp_idr"===a.nalUnitType&&(i.keyFrame=!0),i.endNalUnit()),i.startNalUnit(),i.writeBytes(a.data);i&&this.finishFrame(n,i),this.trigger("data",{track:t,tags:n}),this.trigger("done")}else this.trigger("done")}},a.prototype=new e.utils.Stream,n=function(t){this.numberOfTracks=0,this.metadataStream=t.metadataStream,this.videoTags=[],this.audioTags=[],this.videoTrack=null,this.audioTrack=null,this.pendingCaptions=[],this.pendingMetadata=[],this.pendingTracks=0,n.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):("video"===t.track.type&&(this.videoTrack=t.track,this.videoTags=t.tags,this.pendingTracks++),void("audio"===t.track.type&&(this.audioTrack=t.track,this.audioTags=t.tags,this.pendingTracks++)))}},n.prototype=new e.utils.Stream,n.prototype.flush=function(){var t,e,i,a,s={tags:{},captions:[],metadata:[]};if(!(this.pendingTracks<this.numberOfTracks)){for(this.videoTrack?a=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(a=this.audioTrack.timelineStartInfo.pts),s.tags.videoTags=this.videoTags,s.tags.audioTags=this.audioTags,i=0;i<this.pendingCaptions.length;i++)e=this.pendingCaptions[i],e.startTime=e.startPts-a,e.startTime/=9e4,e.endTime=e.endPts-a,e.endTime/=9e4,s.captions.push(e);for(i=0;i<this.pendingMetadata.length;i++)t=this.pendingMetadata[i],t.cueTime=t.pts-a,t.cueTime/=9e4,s.metadata.push(t);s.metadata.dispatchType=this.metadataStream.dispatchType,this.videoTrack=null,this.audioTrack=null,this.videoTags=[],this.audioTags=[],this.pendingCaptions.length=0,this.pendingMetadata.length=0,this.pendingTracks=0,this.trigger("data",s),this.trigger("done")}},i=function(t){var r,o,d,u,c,p,f,l,g,m=this;i.prototype.init.call(this),t=t||{},this.metadataStream=new e.mp2t.MetadataStream,t.metadataStream=this.metadataStream,r=new e.mp2t.TransportPacketStream,o=new e.mp2t.TransportParseStream,d=new e.mp2t.ElementaryStream,u=new e.codecs.AacStream,c=new e.codecs.H264Stream,g=new n(t),r.pipe(o).pipe(d),d.pipe(c),d.pipe(u),d.pipe(this.metadataStream).pipe(g),e.mp2t.CaptionStream&&(l=new e.mp2t.CaptionStream,c.pipe(l).pipe(g)),d.on("data",(function(t){var e,i,n;if("metadata"===t.type){for(e=t.tracks.length;e--;)"video"===t.tracks[e].type?i=t.tracks[e]:"audio"===t.tracks[e].type&&(n=t.tracks[e]);i&&!p&&(g.numberOfTracks++,p=new a(i),c.pipe(p).pipe(g)),n&&!f&&(g.numberOfTracks++,f=new s(n),u.pipe(f).pipe(g))}})),this.push=function(t){r.push(t)},this.flush=function(){r.flush()},g.on("data",(function(t){m.trigger("data",t)})),g.on("done",(function(){m.trigger("done")})),this.getFlvHeader=function(t,e,i){var a,s,n,r=new Uint8Array(9),o=new DataView(r.buffer);return t=t||0,e=void 0===e||e,i=void 0===i||i,o.setUint8(0,70),o.setUint8(1,76),o.setUint8(2,86),o.setUint8(3,1),o.setUint8(4,(e?4:0)|(i?1:0)),o.setUint32(5,r.byteLength),0>=t?(s=new Uint8Array(r.byteLength+4),s.set(r),s.set([0,0,0,0],r.byteLength),s):(a=new h(h.METADATA_TAG),a.pts=a.dts=0,a.writeMetaDataDouble("duration",t),n=a.finalize().length,s=new Uint8Array(r.byteLength+n),s.set(r),s.set(o.byteLength,n),s)}},i.prototype=new e.utils.Stream,e.flv=e.flv||{},e.flv.Transmuxer=i}(0,this.muxjs),function(t,e,i){"use strict";var a,s,n,r,o,d,h,u,c,p=0,f=videojs.EventTarget,l="blob:vjs-media-source/";d=function(t){Object.defineProperties(t.frame,{id:{get:function(){return videojs.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return videojs.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return videojs.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},h=function(t,e,i){var a,s;if(i)for(a=i.cues.length;a--;)s=i.cues[a],s.startTime<=e&&s.endTime>=t&&i.removeCue(s)},u=function(t,e,i){i.captions&&i.captions.length&&!t.inbandTextTrack_&&(t.inbandTextTrack_=e.player_.addTextTrack("captions","cc1")),i.metadata&&i.metadata.length&&!t.metadataTrack_&&(t.metadataTrack_=e.player_.addTextTrack("metadata","Timed Metadata"),t.metadataTrack_.inBandMetadataTrackDispatchType=i.metadata.dispatchType)},c=function(e,i,a){o=t.WebKitDataCue||t.VTTCue,i&&i.forEach((function(t){this.inbandTextTrack_.addCue(new o(t.startTime+this.timestampOffset,t.endTime+this.timestampOffset,t.text))}),e),a&&a.forEach((function(t){var e=t.cueTime+this.timestampOffset;t.frames.forEach((function(t){var i=new o(e,e,t.value||t.url||t.data||"");i.frame=t,i.value=t,d(i),this.metadataTrack_.addCue(i)}),this)}),e)},a={mode:"auto"},videojs.MediaSource=function(t){var e=videojs.mergeOptions(a,t);return"html5"===e.mode||"auto"===e.mode&&videojs.MediaSource.supportsNativeMediaSources()?new videojs.HtmlMediaSource:new videojs.FlashMediaSource},videojs.MediaSource.supportsNativeMediaSources=function(){return!!t.MediaSource&&t.MediaSource.isTypeSupported('video/mp4;codecs="avc1.4d400d,mp4a.40.2"')},videojs.HtmlMediaSource=videojs.extend(f,{constructor:function(){var e,i=this;for(e in this.mediaSource_=new t.MediaSource,this.mediaSource_)e in videojs.HtmlMediaSource.prototype||"function"!=typeof this.mediaSource_[e]||(this[e]=this.mediaSource_[e].bind(this.mediaSource_));this.duration_=NaN,Object.defineProperty(this,"duration",{get:function(){return i.duration_===1/0?i.duration_:i.mediaSource_.duration},set:function(t){return i.duration_=t,t!==1/0?void(i.mediaSource_.duration=t):void 0}}),Object.defineProperty(this,"seekable",{get:function(){return this.duration_===1/0?videojs.createTimeRanges([[0,i.mediaSource_.duration]]):i.mediaSource_.seekable}}),Object.defineProperty(this,"readyState",{get:function(){return i.mediaSource_.readyState}}),this.sourceBuffers=[],["sourceopen","sourceclose","sourceended"].forEach((function(t){this.mediaSource_.addEventListener(t,this.trigger.bind(this))}),this),this.on("sourceopen",(function(t){var e=document.querySelector('[src="'+i.url_+'"]');e&&(i.player_=videojs(e.parentNode))})),this.on("sourceclose",(function(t){this.sourceBuffers.forEach((function(t){t.transmuxer_&&t.transmuxer_.terminate()})),this.sourceBuffers.length=0}))},addSeekableRange_:function(t,e){var i;if(this.duration!==1/0)throw i=new Error("MediaSource.addSeekableRange() can only be invoked when the duration is Infinity"),i.name="InvalidStateError",i.code=11,i;(e>this.mediaSource_.duration||isNaN(this.mediaSource_.duration))&&(this.mediaSource_.duration=e)},addSourceBuffer:function(t){var e,i,a,n,r=/avc1\.[\da-f]+/i,o=/mp4a\.\d+.\d+/i;return/^video\/mp2t/i.test(t)?(i=t.split(";").slice(1).join(";"),i=g(i),a=(i.match(r)||[])[0],n=(i.match(o)||[])[0],a&&a.length||(a="avc1.4d400d"),n&&n.length||(n="mp4a.40.2"),e=new s(this,[a,n]),this.sourceBuffers.push(e),e):(e=this.mediaSource_.addSourceBuffer(t),this.sourceBuffers.push(e),e)}});var g=function(t){return t.replace(/avc1\.(\d+)\.(\d+)/i,(function(t,e,i){var a=("00"+Number(e).toString(16)).slice(-2),s=("00"+Number(i).toString(16)).slice(-2);return"avc1."+a+"00"+s}))};n=function(t,e,i){return function(){return t[e]&&t[e].updating?void 0:t.trigger(i)}},s=videojs.extend(f,{constructor:function(t,e){var i=this;this.timestampOffset_=0,this.pendingBuffers_=[],this.bufferUpdating_=!1,this.mediaSource_=t,this.codecs_=e,this.transmuxer_=new Worker(URL.createObjectURL(new Blob(['var muxjs={},transmuxer,initOptions={};!function(a,b,c){var d=function(){this.init=function(){var a={};this.on=function(b,c){a[b]||(a[b]=[]),a[b].push(c)},this.off=function(b,c){var d;return a[b]?(d=a[b].indexOf(c),a[b].splice(d,1),d>-1):!1},this.trigger=function(b){var c,d,e,f;if(c=a[b])if(2===arguments.length)for(e=c.length,d=0;e>d;++d)c[d].call(this,arguments[1]);else{for(f=[],d=arguments.length,d=1;d<arguments.length;++d)f.push(arguments[d]);for(e=c.length,d=0;e>d;++d)c[d].apply(this,f)}},this.dispose=function(){a={}}}};d.prototype.pipe=function(a){return this.on("data",function(b){a.push(b)}),this.on("done",function(){a.flush()}),a},d.prototype.push=function(a){this.trigger("data",a)},d.prototype.flush=function(){this.trigger("done")},a.muxjs=a.muxjs||{},a.muxjs.utils=a.muxjs.utils||{},a.muxjs.utils.Stream=d}(this,this.muxjs),function(a,b){var c;c=function(a){var b=a.byteLength,c=0,d=0;this.length=function(){return 8*b},this.bitsAvailable=function(){return 8*b+d},this.loadWord=function(){var e=a.byteLength-b,f=new Uint8Array(4),g=Math.min(4,b);if(0===g)throw new Error("no bytes available");f.set(a.subarray(e,e+g)),c=new DataView(f.buffer).getUint32(0),d=8*g,b-=g},this.skipBits=function(a){var e;d>a?(c<<=a,d-=a):(a-=d,e=Math.floor(a/8),a-=8*e,b-=e,this.loadWord(),c<<=a,d-=a)},this.readBits=function(a){var e=Math.min(d,a),f=c>>>32-e;return console.assert(32>a,"Cannot read more than 32 bits at a time"),d-=e,d>0?c<<=e:b>0&&this.loadWord(),e=a-e,e>0?f<<e|this.readBits(e):f},this.skipLeadingZeros=function(){var a;for(a=0;d>a;++a)if(0!==(c&2147483648>>>a))return c<<=a,d-=a,a;return this.loadWord(),a+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var a=this.skipLeadingZeros();return this.readBits(a+1)-1},this.readExpGolomb=function(){var a=this.readUnsignedExpGolomb();return 1&a?1+a>>>1:-1*(a>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},a.muxjs=b||{},b.utils=b.utils||{},b.utils.ExpGolomb=c}(this,this.muxjs),function(a,b,c){"use strict";var d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P;O=a.Uint8Array,P=a.DataView,function(){var a;A={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]};for(a in A)A.hasOwnProperty(a)&&(A[a]=[a.charCodeAt(0),a.charCodeAt(1),a.charCodeAt(2),a.charCodeAt(3)]);B=new O(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),D=new O(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),C=new O([0,0,0,1]),E=new O([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),F=new O([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),G={video:E,audio:F},J=new O([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),I=new O([0,0,0,0,0,0,0,0]),K=new O([0,0,0,0,0,0,0,0]),L=K,M=new O([0,0,0,0,0,0,0,0,0,0,0,0]),N=K,H=new O([0,0,0,1,0,0,0,0,0,0,0,0])}(),d=function(a){var b,c,d,e=[],f=0;for(b=1;b<arguments.length;b++)e.push(arguments[b]);for(b=e.length;b--;)f+=e[b].byteLength;for(c=new O(f+8),d=new P(c.buffer,c.byteOffset,c.byteLength),d.setUint32(0,c.byteLength),c.set(a,4),b=0,f=8;b<e.length;b++)c.set(e[b],f),f+=e[b].byteLength;return c},e=function(){return d(A.dinf,d(A.dref,J))},f=function(a){return d(A.esds,new O([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,a.audioobjecttype<<3|a.samplingfrequencyindex>>>1,a.samplingfrequencyindex<<7|a.channelcount<<3,6,1,2]))},g=function(){return d(A.ftyp,B,C,B,D)},s=function(a){return d(A.hdlr,G[a])},h=function(a){return d(A.mdat,a)},r=function(a){var b=new O([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,a.duration>>>24&255,a.duration>>>16&255,a.duration>>>8&255,255&a.duration,85,196,0,0]);return a.samplerate&&(b[12]=a.samplerate>>>24&255,b[13]=a.samplerate>>>16&255,b[14]=a.samplerate>>>8&255,b[15]=255&a.samplerate),d(A.mdhd,b)},q=function(a){return d(A.mdia,r(a),s(a.type),j(a))},i=function(a){return d(A.mfhd,new O([0,0,0,0,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a]))},j=function(a){return d(A.minf,"video"===a.type?d(A.vmhd,H):d(A.smhd,I),e(),u(a))},k=function(a,b){for(var c=[],e=b.length;e--;)c[e]=x(b[e]);return d.apply(null,[A.moof,i(a)].concat(c))},l=function(a){for(var b=a.length,c=[];b--;)c[b]=o(a[b]);return d.apply(null,[A.moov,n(4294967295)].concat(c).concat(m(a)))},m=function(a){for(var b=a.length,c=[];b--;)c[b]=y(a[b]);return d.apply(null,[A.mvex].concat(c))},n=function(a){var b=new O([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&a)>>24,(16711680&a)>>16,(65280&a)>>8,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return d(A.mvhd,b)},t=function(a){var b,c,e=a.samples||[],f=new O(4+e.length);for(c=0;c<e.length;c++)b=e[c].flags,f[c+4]=b.dependsOn<<4|b.isDependedOn<<2|b.hasRedundancy;return d(A.sdtp,f)},u=function(a){return d(A.stbl,v(a),d(A.stts,N),d(A.stsc,L),d(A.stsz,M),d(A.stco,K))},function(){var a,b;v=function(c){return d(A.stsd,new O([0,0,0,0,0,0,0,1]),"video"===c.type?a(c):b(c))},a=function(a){var b,c=a.sps||[],e=a.pps||[],f=[],g=[];for(b=0;b<c.length;b++)f.push((65280&c[b].byteLength)>>>8),f.push(255&c[b].byteLength),f=f.concat(Array.prototype.slice.call(c[b]));for(b=0;b<e.length;b++)g.push((65280&e[b].byteLength)>>>8),g.push(255&e[b].byteLength),g=g.concat(Array.prototype.slice.call(e[b]));return d(A.avc1,new O([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&a.width)>>8,255&a.width,(65280&a.height)>>8,255&a.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),d(A.avcC,new O([1,a.profileIdc,a.profileCompatibility,a.levelIdc,255].concat([c.length]).concat(f).concat([e.length]).concat(g))),d(A.btrt,new O([0,28,156,128,0,45,198,192,0,45,198,192])))},b=function(a){return d(A.mp4a,new O([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&a.channelcount)>>8,255&a.channelcount,(65280&a.samplesize)>>8,255&a.samplesize,0,0,0,0,(65280&a.samplerate)>>8,255&a.samplerate,0,0]),f(a))}}(),w=function(){return d(A.styp,B,C,B)},p=function(a){var b=new O([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,0,(4278190080&a.duration)>>24,(16711680&a.duration)>>16,(65280&a.duration)>>8,255&a.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&a.width)>>8,255&a.width,0,0,(65280&a.height)>>8,255&a.height,0,0]);return d(A.tkhd,b)},x=function(a){var b,c,e,f,g;return b=d(A.tfhd,new O([0,0,0,58,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),c=d(A.tfdt,new O([0,0,0,0,a.baseMediaDecodeTime>>>24&255,a.baseMediaDecodeTime>>>16&255,a.baseMediaDecodeTime>>>8&255,255&a.baseMediaDecodeTime])),g=88,"audio"===a.type?(e=z(a,g),d(A.traf,b,c,e)):(f=t(a),e=z(a,f.length+g),d(A.traf,b,c,e,f))},o=function(a){return a.duration=a.duration||4294967295,d(A.trak,p(a),q(a))},y=function(a){var b=new O([0,0,0,0,(4278190080&a.id)>>24,(16711680&a.id)>>16,(65280&a.id)>>8,255&a.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==a.type&&(b[b.length-1]=0),d(A.trex,b)},function(){var a,b,e;e=function(a,b){var d=0,e=0,f=0,g=0;return a.length&&(a[0].duration!==c&&(d=1),a[0].size!==c&&(e=2),a[0].flags!==c&&(f=4),a[0].compositionTimeOffset!==c&&(g=8)),[0,0,d|e|f|g,1,(4278190080&a.length)>>>24,(16711680&a.length)>>>16,(65280&a.length)>>>8,255&a.length,(4278190080&b)>>>24,(16711680&b)>>>16,(65280&b)>>>8,255&b]},b=function(a,b){var c,f,g,h;for(f=a.samples||[],b+=20+16*f.length,c=e(f,b),h=0;h<f.length;h++)g=f[h],c=c.concat([(4278190080&g.duration)>>>24,(16711680&g.duration)>>>16,(65280&g.duration)>>>8,255&g.duration,(4278190080&g.size)>>>24,(16711680&g.size)>>>16,(65280&g.size)>>>8,255&g.size,g.flags.isLeading<<2|g.flags.dependsOn,g.flags.isDependedOn<<6|g.flags.hasRedundancy<<4|g.flags.paddingValue<<1|g.flags.isNonSyncSample,61440&g.flags.degradationPriority,15&g.flags.degradationPriority,(4278190080&g.compositionTimeOffset)>>>24,(16711680&g.compositionTimeOffset)>>>16,(65280&g.compositionTimeOffset)>>>8,255&g.compositionTimeOffset]);return d(A.trun,new O(c))},a=function(a,b){var c,f,g,h;for(f=a.samples||[],b+=20+8*f.length,c=e(f,b),h=0;h<f.length;h++)g=f[h],c=c.concat([(4278190080&g.duration)>>>24,(16711680&g.duration)>>>16,(65280&g.duration)>>>8,255&g.duration,(4278190080&g.size)>>>24,(16711680&g.size)>>>16,(65280&g.size)>>>8,255&g.size]);return d(A.trun,new O(c))},z=function(c,d){return"audio"===c.type?a(c,d):b(c,d)}}(),b.mp4={ftyp:g,mdat:h,moof:k,moov:l,initSegment:function(a){var b,c=g(),d=l(a);return b=new O(c.byteLength+d.byteLength),b.set(c),b.set(d,c.byteLength),b}}}(this,this.muxjs),function(a,b){"use strict";var c,d=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];c=function(){var a,b;c.prototype.init.call(this),a=this,this.push=function(a){var c,e,f,g,h,i,j=0,k=0;if("audio"===a.type)for(b?(g=b,b=new Uint8Array(g.byteLength+a.data.byteLength),b.set(g),b.set(a.data,g.byteLength)):b=a.data;j+5<b.length;)if(255===b[j]&&240===(246&b[j+1])){if(e=2*(1&~b[j+1]),c=(3&b[j+3])<<11|b[j+4]<<3|(224&b[j+5])>>5,h=1024*((3&b[j+6])+1),i=9e4*h/d[(60&b[j+2])>>>2],f=j+c,b.byteLength<f)return;if(this.trigger("data",{pts:a.pts+k*i,dts:a.dts+k*i,sampleCount:h,audioobjecttype:(b[j+2]>>>6&3)+1,channelcount:(1&b[j+2])<<3|(192&b[j+3])>>>6,samplerate:d[(60&b[j+2])>>>2],samplingfrequencyindex:(60&b[j+2])>>>2,samplesize:16,data:b.subarray(j+7+e,f)}),b.byteLength===f)return void(b=void 0);k++,b=b.subarray(f)}else j++}},c.prototype=new b.utils.Stream,b.codecs=b.codecs||{},b.codecs.AacStream=c}(this,this.muxjs),function(a,b){"use strict";var c,d;d=function(){var a,b,c=0;d.prototype.init.call(this),this.push=function(d){var e;for(b?(e=new Uint8Array(b.byteLength+d.data.byteLength),e.set(b),e.set(d.data,b.byteLength),b=e):b=d.data;c<b.byteLength-3;c++)if(1===b[c+2]){a=c+5;break}for(;a<b.byteLength;)switch(b[a]){case 0:if(0!==b[a-1]){a+=2;break}if(0!==b[a-2]){a++;break}this.trigger("data",b.subarray(c+3,a-2));do a++;while(1!==b[a]&&a<b.length);c=a-2,a+=3;break;case 1:if(0!==b[a-1]||0!==b[a-2]){a+=3;break}this.trigger("data",b.subarray(c+3,a-2)),c=a-2,a+=3;break;default:a+=3}b=b.subarray(c),a-=c,c=0},this.flush=function(){b&&b.byteLength>3&&this.trigger("data",b.subarray(c+3)),b=null,c=0,this.trigger("done")}},d.prototype=new b.utils.Stream,c=function(){var a,e,f,g,h,i,j,k=new d;c.prototype.init.call(this),a=this,this.push=function(a){"video"===a.type&&(e=a.trackId,f=a.pts,g=a.dts,k.push(a))},k.on("data",function(b){var c={trackId:e,pts:f,dts:g,data:b};switch(31&b[0]){case 5:c.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:c.nalUnitType="sei_rbsp",c.escapedRBSP=h(b.subarray(1));break;case 7:c.nalUnitType="seq_parameter_set_rbsp",c.escapedRBSP=h(b.subarray(1)),c.config=i(c.escapedRBSP);break;case 8:c.nalUnitType="pic_parameter_set_rbsp";break;case 9:c.nalUnitType="access_unit_delimiter_rbsp"}a.trigger("data",c)}),k.on("done",function(){a.trigger("done")}),this.flush=function(){k.flush()},j=function(a,b){var c,d,e=8,f=8;for(c=0;a>c;c++)0!==f&&(d=b.readExpGolomb(),f=(e+d+256)%256),e=0===f?e:f},h=function(a){for(var b,c,d=a.byteLength,e=[],f=1;d-2>f;)0===a[f]&&0===a[f+1]&&3===a[f+2]?(e.push(f+2),f+=2):f++;if(0===e.length)return a;b=d-e.length,c=new Uint8Array(b);var g=0;for(f=0;b>f;g++,f++)g===e[0]&&(g++,e.shift()),c[f]=a[g];return c},i=function(a){var c,d,e,f,g,h,i,k,l,m,n,o,p=0,q=0,r=0,s=0;if(c=new b.utils.ExpGolomb(a),d=c.readUnsignedByte(),f=c.readUnsignedByte(),e=c.readUnsignedByte(),c.skipUnsignedExpGolomb(),(100===d||110===d||122===d||244===d||44===d||83===d||86===d||118===d||128===d||138===d||139===d||134===d)&&(g=c.readUnsignedExpGolomb(),3===g&&c.skipBits(1),c.skipUnsignedExpGolomb(),c.skipUnsignedExpGolomb(),c.skipBits(1),c.readBoolean()))for(n=3!==g?8:12,o=0;n>o;o++)c.readBoolean()&&(6>o?j(16,c):j(64,c));if(c.skipUnsignedExpGolomb(),h=c.readUnsignedExpGolomb(),0===h)c.readUnsignedExpGolomb();else if(1===h)for(c.skipBits(1),c.skipExpGolomb(),c.skipExpGolomb(),i=c.readUnsignedExpGolomb(),o=0;i>o;o++)c.skipExpGolomb();return c.skipUnsignedExpGolomb(),c.skipBits(1),k=c.readUnsignedExpGolomb(),l=c.readUnsignedExpGolomb(),m=c.readBits(1),0===m&&c.skipBits(1),c.skipBits(1),c.readBoolean()&&(p=c.readUnsignedExpGolomb(),q=c.readUnsignedExpGolomb(),r=c.readUnsignedExpGolomb(),s=c.readUnsignedExpGolomb()),{profileIdc:d,levelIdc:e,profileCompatibility:f,width:16*(k+1)-2*p-2*q,height:(2-m)*(l+1)*16-2*r-2*s}}},c.prototype=new b.utils.Stream,b.codecs=b.codecs||{},b.codecs.H264Stream=c,b.codecs.NalByteStream=d}(this,this.muxjs),function(a,b,c){"use strict";var d,e,f,g,h,i,j,k;g=188,k=71,h=27,i=15,j=21,d=function(){var a=new Uint8Array(g),b=0;d.prototype.init.call(this),this.push=function(c){var d,e=0,f=g;for(b?(d=new Uint8Array(c.byteLength+b),d.set(a.subarray(0,b)),d.set(c,b),b=0):d=c;f<d.byteLength;)d[e]!==k||d[f]!==k?(e++,f++):(this.trigger("data",d.subarray(e,f)),e+=g,f+=g);e<d.byteLength&&(a.set(d.subarray(e),0),b=d.byteLength-e)},this.flush=function(){b===g&&a[0]===k&&(this.trigger("data",a),b=0),this.trigger("done")}},d.prototype=new b.utils.Stream,e=function(){var a,b,d,f;e.prototype.init.call(this),f=this,this.packetsWaitingForPmt=[],this.programMapTable=c,a=function(a,c){var e=0;c.payloadUnitStartIndicator&&(e+=a[e]+1),"pat"===c.type?b(a.subarray(e),c):d(a.subarray(e),c)},b=function(a,b){b.section_number=a[7],b.last_section_number=a[8],f.pmtPid=(31&a[10])<<8|a[11],b.pmtPid=f.pmtPid},d=function(a,b){var c,d,e,g;if(1&a[5]){for(f.programMapTable={},c=(15&a[1])<<8|a[2],d=3+c-4,e=(15&a[10])<<8|a[11],g=12+e;d>g;)f.programMapTable[(31&a[g+1])<<8|a[g+2]]=a[g],g+=((15&a[g+3])<<8|a[g+4])+5;for(b.programMapTable=f.programMapTable;f.packetsWaitingForPmt.length;)f.processPes_.apply(f,f.packetsWaitingForPmt.shift())}},this.push=function(b){var d={},e=4;d.payloadUnitStartIndicator=!!(64&b[1]),d.pid=31&b[1],d.pid<<=8,d.pid|=b[2],(48&b[3])>>>4>1&&(e+=b[e]+1),0===d.pid?(d.type="pat",a(b.subarray(e),d),this.trigger("data",d)):d.pid===this.pmtPid?(d.type="pmt",a(b.subarray(e),d),this.trigger("data",d)):this.programMapTable===c?this.packetsWaitingForPmt.push([b,e,d]):this.processPes_(b,e,d)},this.processPes_=function(a,b,c){c.streamType=this.programMapTable[c.pid],c.type="pes",c.data=a.subarray(b),this.trigger("data",c)}},e.prototype=new b.utils.Stream,e.STREAM_TYPES={h264:27,adts:15},f=function(){var a,b={data:[],size:0},c={data:[],size:0},d={data:[],size:0},e=function(a,b){var c;b.dataAlignmentIndicator=0!==(4&a[6]),c=a[7],192&c&&(b.pts=(14&a[9])<<27|(255&a[10])<<20|(254&a[11])<<12|(255&a[12])<<5|(254&a[13])>>>3,b.pts*=4,b.pts+=(6&a[13])>>>1,b.dts=b.pts,64&c&&(b.dts=(14&a[14])<<27|(255&a[15])<<20|(254&a[16])<<12|(255&a[17])<<5|(254&a[18])>>>3,b.dts*=4,b.dts+=(6&a[18])>>>1)),b.data=a.subarray(9+a[8])},g=function(b,c){var d,f=new Uint8Array(b.size),g={type:c},h=0;if(b.data.length){for(g.trackId=b.data[0].pid;b.data.length;)d=b.data.shift(),f.set(d.data,h),h+=d.data.byteLength;e(f,g),b.size=0,a.trigger("data",g)}};f.prototype.init.call(this),a=this,this.push=function(e){({pat:function(){},pes:function(){var a,f;switch(e.streamType){case h:a=b,f="video";break;case i:a=c,f="audio";break;case j:a=d,f="timed-metadata";break;default:return}e.payloadUnitStartIndicator&&g(a,f),a.data.push(e),a.size+=e.data.byteLength},pmt:function(){var b,c,d={type:"metadata",tracks:[]},f=e.programMapTable;for(b in f)f.hasOwnProperty(b)&&(c={timelineStartInfo:{baseMediaDecodeTime:0}},c.id=+b,f[b]===h?(c.codec="avc",c.type="video"):f[b]===i&&(c.codec="adts",c.type="audio"),d.tracks.push(c));a.trigger("data",d)}})[e.type]()},this.flush=function(){g(b,"video"),g(c,"audio"),g(d,"timed-metadata"),this.trigger("done")}},f.prototype=new b.utils.Stream,b.mp2t=b.mp2t||{},b.mp2t.PAT_PID=0,b.mp2t.MP2T_PACKET_LENGTH=g,b.mp2t.H264_STREAM_TYPE=h,b.mp2t.ADTS_STREAM_TYPE=i,b.mp2t.METADATA_STREAM_TYPE=j,b.mp2t.TransportPacketStream=d,b.mp2t.TransportParseStream=e,b.mp2t.ElementaryStream=f}(this,this.muxjs),function(a,b,c){"use strict";var d=4,e=128,f=function(a){for(var b=0,c={payloadType:-1,payloadSize:0},f=0,g=0;b<a.byteLength&&a[b]!==e;){for(;255===a[b];)f+=255,b++;for(f+=a[b++];255===a[b];)g+=255,b++;if(g+=a[b++],!c.payload&&f===d){c.payloadType=f,c.payloadSize=g,c.payload=a.subarray(b,b+g);break}b+=g,f=0,g=0}return c},g=function(a){return 181!==a.payload[0]?null:49!==(a.payload[1]<<8|a.payload[2])?null:"GA94"!==String.fromCharCode(a.payload[3],a.payload[4],a.payload[5],a.payload[6])?null:3!==a.payload[7]?null:a.payload.subarray(8,a.payload.length-1)},h=function(a,b){var c,d,e,f,g=[];if(!(64&b[0]))return g;for(d=31&b[0],c=0;d>c;c++)e=3*c,f={type:3&b[e+2],pts:a},4&b[e+2]&&(f.ccData=b[e+3]<<8|b[e+4],g.push(f));return g},i=function(){i.prototype.init.call(this),this.captionPackets_=[],this.field1_=new w,this.field1_.on("data",this.trigger.bind(this,"data")),this.field1_.on("done",this.trigger.bind(this,"done"))};i.prototype=new b.utils.Stream,i.prototype.push=function(a){var b,c;"sei_rbsp"===a.nalUnitType&&(b=f(a.escapedRBSP),b.payloadType===d&&(c=g(b),c&&(this.captionPackets_=this.captionPackets_.concat(h(a.pts,c)))))},i.prototype.flush=function(){return this.captionPackets_.length?(this.captionPackets_.sort(function(a,b){return a.pts-b.pts}),this.captionPackets_.forEach(this.field1_.push,this.field1_),this.captionPackets_.length=0,void this.field1_.flush()):void this.field1_.flush()};var j={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608},k=0,l=5152,m=5167,n=5157,o=5158,p=5159,q=5165,r=5153,s=5164,t=5166,u=14,v=function(){for(var a=[],b=u+1;b--;)a.push("");return a},w=function(){w.prototype.init.call(this),this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=v(),this.nonDisplayed_=v(),this.lastControlCode_=null,this.push=function(a){var b,c,d,e;if(b=32639&a.ccData,b===this.lastControlCode_)return void(this.lastControlCode_=null);switch(4096===(61440&b)?this.lastControlCode_=b:this.lastControlCode_=null,b){case k:break;case l:this.mode_="popOn";break;case m:this.flushDisplayed(a.pts),c=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=c,this.startPts_=a.pts;break;case n:this.topRow_=u-1,this.mode_="rollUp";break;case o:this.topRow_=u-2,this.mode_="rollUp";break;case p:this.topRow_=u-3,this.mode_="rollUp";break;case q:this.flushDisplayed(a.pts),this.shiftRowsUp_(),this.startPts_=a.pts;break;case r:"popOn"===this.mode_?this.nonDisplayed_[u]=this.nonDisplayed_[u].slice(0,-1):this.displayed_[u]=this.displayed_[u].slice(0,-1);break;case s:this.flushDisplayed(a.pts),this.displayed_=v();break;case t:this.nonDisplayed_=v();break;default:if(d=b>>>8,e=255&b,d>=16&&23>=d&&e>=64&&127>=e&&(16!==d||96>e)&&(d=e=32),16===(240&d))return;this[this.mode_](a.pts,d,e)}}};w.prototype=new b.utils.Stream,w.prototype.flushDisplayed=function(a){var b,c;for(c=0;c<this.displayed_.length;c++)b=this.displayed_[c],b.length&&this.trigger("data",{startPts:this.startPts_,endPts:a,text:b})},w.prototype.popOn=function(a,b,c){var d=this.nonDisplayed_[u];b=j[b]||b,d+=String.fromCharCode(b),c=j[c]||c,d+=String.fromCharCode(c),this.nonDisplayed_[u]=d},w.prototype.rollUp=function(a,b,c){var d=this.displayed_[u];""===d&&(this.flushDisplayed(a),this.startPts_=a),b=j[b]||b,d+=String.fromCharCode(b),c=j[c]||c,d+=String.fromCharCode(c),this.displayed_[u]=d},w.prototype.shiftRowsUp_=function(){var a;for(a=0;a<this.topRow_;a++)this.displayed_[a]="";for(a=this.topRow_;u>a;a++)this.displayed_[a]=this.displayed_[a+1];this.displayed_[u]=""},b.mp2t=b.mp2t||{},b.mp2t.CaptionStream=i,b.mp2t.Cea608Stream=w}(this,this.muxjs),function(a,b,c){"use strict";var d,e=function(a,b,c){var d,e="";for(d=b;c>d;d++)e+="%"+("00"+a[d].toString(16)).slice(-2);return e},f=function(b,c,d){return a.decodeURIComponent(e(b,c,d))},g=function(b,c,d){return a.unescape(e(b,c,d))},h=function(a){return a[0]<<21|a[1]<<14|a[2]<<7|a[3]},i={TXXX:function(a){var b;if(3===a.data[0]){for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=f(a.data,1,b),a.value=f(a.data,b+1,a.data.length-1);break}a.data=a.value}},WXXX:function(a){var b;if(3===a.data[0])for(b=1;b<a.data.length;b++)if(0===a.data[b]){a.description=f(a.data,1,b),a.url=f(a.data,b+1,a.data.length);break}},PRIV:function(a){var b;for(b=0;b<a.data.length;b++)if(0===a.data[b]){a.owner=g(a.data,0,b);break}a.privateData=a.data.subarray(b+1),a.data=a.privateData}};d=function(a){var c,e={debug:!(!a||!a.debug),descriptor:a&&a.descriptor},f=0,g=[],j=0;if(d.prototype.init.call(this),this.dispatchType=b.mp2t.METADATA_STREAM_TYPE.toString(16),e.descriptor)for(c=0;c<e.descriptor.length;c++)this.dispatchType+=("00"+e.descriptor[c].toString(16)).slice(-2);this.push=function(a){var b,c,d,k,l;if("timed-metadata"===a.type){if(a.dataAlignmentIndicator&&(j=0,g.length=0),0===g.length&&(a.data.length<10||a.data[0]!=="I".charCodeAt(0)||a.data[1]!=="D".charCodeAt(0)||a.data[2]!=="3".charCodeAt(0)))return void(e.debug&&console.log("Skipping unrecognized metadata packet"));if(g.push(a),j+=a.data.byteLength,1===g.length&&(f=h(a.data.subarray(6,10)),f+=10),!(f>j)){for(b={data:new Uint8Array(f),frames:[],pts:g[0].pts,dts:g[0].dts},l=0;f>l;)b.data.set(g[0].data.subarray(0,f-l),l),l+=g[0].data.byteLength,j-=g[0].data.byteLength,g.shift();c=10,64&b.data[5]&&(c+=4,c+=h(b.data.subarray(10,14)),f-=h(b.data.subarray(16,20)));do{if(d=h(b.data.subarray(c+4,c+8)),1>d)return console.log("Malformed ID3 frame encountered. Skipping metadata parsing.");k={id:String.fromCharCode(b.data[c],b.data[c+1],b.data[c+2],b.data[c+3]),data:b.data.subarray(c+10,c+d+10)},k.key=k.id,i[k.id]&&i[k.id](k),b.frames.push(k),c+=10,c+=d}while(f>c);this.trigger("data",b)}}}},d.prototype=new b.utils.Stream,b.mp2t=b.mp2t||{},b.mp2t.MetadataStream=d}(this,this.muxjs),function(a,b,c){"use strict";var d,e,f,g,h,i,j,k=b.mp4;e=function(a){var b=[],c=0,d=0,f=0;e.prototype.init.call(this),this.push=function(d){h(a,d),a&&(a.audioobjecttype=d.audioobjecttype,a.channelcount=d.channelcount,a.samplerate=d.samplerate,a.samplingfrequencyindex=d.samplingfrequencyindex,a.samplesize=d.samplesize),b.push(d),c+=d.data.byteLength},this.setEarliestDts=function(b){f=b-a.timelineStartInfo.baseMediaDecodeTime},this.flush=function(){var e,g,h,l,m,n,o;if(0===c)return void this.trigger("done");for(a.minSegmentDts<f&&(a.minSegmentDts=1/0,b=b.filter(function(b){return b.dts>=f?(a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.minSegmentPts=a.minSegmentDts,!0):(c-=b.data.byteLength,!1)})),h=new Uint8Array(c),a.samples=[],m=0;b.length;)g=b[0],l={size:g.data.byteLength,duration:1024},a.samples.push(l),h.set(g.data,m),m+=g.data.byteLength,b.shift();c=0,n=k.mdat(h),j(a),o=k.moof(d,[a]),e=new Uint8Array(o.byteLength+n.byteLength),d++,e.set(o),e.set(n,o.byteLength),i(a),this.trigger("data",{track:a,boxes:e}),this.trigger("done")}},e.prototype=new b.utils.Stream,d=function(a){var b,e,f=0,g=[],l=0;d.prototype.init.call(this),delete a.minPTS,this.push=function(c){h(a,c),"seq_parameter_set_rbsp"!==c.nalUnitType||b||(b=c.config,a.width=b.width,a.height=b.height,a.sps=[c.data],a.profileIdc=b.profileIdc,a.levelIdc=b.levelIdc,a.profileCompatibility=b.profileCompatibility),"pic_parameter_set_rbsp"!==c.nalUnitType||e||(e=c.data,a.pps=[c.data]),g.push(c),l+=c.data.byteLength},this.flush=function(){for(var d,h,m,n,o,p,q,r,s,t;g.length&&"access_unit_delimiter_rbsp"!==g[0].nalUnitType;)g.shift();if(0===l)return void this.trigger("done");for(q=new Uint8Array(l+4*g.length),r=new DataView(q.buffer),a.samples=[],s={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0}},p=0;g.length;)h=g[0],"access_unit_delimiter_rbsp"===h.nalUnitType&&(d&&(s.duration=h.dts-d.dts,a.samples.push(s)),s={size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0},dataOffset:p,compositionTimeOffset:h.pts-h.dts},d=h),"slice_layer_without_partitioning_rbsp_idr"===h.nalUnitType&&(s.flags.dependsOn=2),s.size+=4,s.size+=h.data.byteLength,r.setUint32(p,h.data.byteLength),p+=4,q.set(h.data,p),p+=h.data.byteLength,g.shift();for(a.samples.length&&(s.duration=a.samples[a.samples.length-1].duration),a.samples.push(s),t=0;a.samples.length;){if(s=a.samples[0],2===s.flags.dependsOn){q=q.subarray(s.dataOffset),s.duration+=t;break}t+=s.duration,a.samples.shift()}l=0,n=k.mdat(q),j(a),this.trigger("timelineStartInfo",a.timelineStartInfo),m=k.moof(f,[a]),o=new Uint8Array(m.byteLength+n.byteLength),f++,o.set(m),o.set(n,m.byteLength),i(a),this.trigger("data",{track:a,boxes:o}),b=c,e=c,this.trigger("done")}},d.prototype=new b.utils.Stream,h=function(a,b){"number"==typeof b.pts&&(a.timelineStartInfo.pts===c&&(a.timelineStartInfo.pts=b.pts),a.minSegmentPts===c?a.minSegmentPts=b.pts:a.minSegmentPts=Math.min(a.minSegmentPts,b.pts),a.maxSegmentPts===c?a.maxSegmentPts=b.pts:a.maxSegmentPts=Math.max(a.maxSegmentPts,b.pts)),"number"==typeof b.dts&&(a.timelineStartInfo.dts===c&&(a.timelineStartInfo.dts=b.dts),a.minSegmentDts===c?a.minSegmentDts=b.dts:a.minSegmentDts=Math.min(a.minSegmentDts,b.dts),a.maxSegmentDts===c?a.maxSegmentDts=b.dts:a.maxSegmentDts=Math.max(a.maxSegmentDts,b.dts))},i=function(a){delete a.minSegmentDts,delete a.maxSegmentDts,delete a.minSegmentPts,delete a.maxSegmentPts},j=function(a){var b,c=9e4,d=a.minSegmentDts-a.timelineStartInfo.dts,e=a.minSegmentPts-a.minSegmentDts;a.baseMediaDecodeTime=a.timelineStartInfo.baseMediaDecodeTime,a.baseMediaDecodeTime+=d,a.baseMediaDecodeTime-=e,a.baseMediaDecodeTime=Math.max(0,a.baseMediaDecodeTime),"audio"===a.type&&(b=a.samplerate/c,a.baseMediaDecodeTime*=b,a.baseMediaDecodeTime=Math.floor(a.baseMediaDecodeTime))},g=function(a){this.numberOfTracks=0,this.metadataStream=a.metadataStream,"undefined"!=typeof a.remux?this.remuxTracks=!!a.remux:this.remuxTracks=!0,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,g.prototype.init.call(this),this.push=function(a){return a.text?this.pendingCaptions.push(a):a.frames?this.pendingMetadata.push(a):(this.pendingTracks.push(a.track),this.pendingBoxes.push(a.boxes),this.pendingBytes+=a.boxes.byteLength,"video"===a.track.type&&(this.videoTrack=a.track),void("audio"===a.track.type&&(this.audioTrack=a.track)))}},g.prototype=new b.utils.Stream,g.prototype.flush=function(){var a,c,d,e,f=0,g={captions:[],metadata:[]},h=0;if(!(0===this.pendingTracks.length||this.remuxTracks&&this.pendingTracks.length<this.numberOfTracks)){for(this.videoTrack?h=this.videoTrack.timelineStartInfo.pts:this.audioTrack&&(h=this.audioTrack.timelineStartInfo.pts),1===this.pendingTracks.length?g.type=this.pendingTracks[0].type:g.type="combined",this.emittedTracks+=this.pendingTracks.length,d=b.mp4.initSegment(this.pendingTracks),g.data=new Uint8Array(d.byteLength+this.pendingBytes),g.data.set(d),f+=d.byteLength,e=0;e<this.pendingBoxes.length;e++)g.data.set(this.pendingBoxes[e],f),f+=this.pendingBoxes[e].byteLength;for(e=0;e<this.pendingCaptions.length;e++)a=this.pendingCaptions[e],a.startTime=a.startPts-h,a.startTime/=9e4,a.endTime=a.endPts-h,a.endTime/=9e4,g.captions.push(a);for(e=0;e<this.pendingMetadata.length;e++)c=this.pendingMetadata[e],c.cueTime=c.pts-h,c.cueTime/=9e4,g.metadata.push(c);g.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",g),this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)}},f=function(a){var h,j,k,l,m,n,o,p,q,r,s,t=this;f.prototype.init.call(this),a=a||{},this.baseMediaDecodeTime=a.baseMediaDecodeTime||0,this.metadataStream=new b.mp2t.MetadataStream,a.metadataStream=this.metadataStream,k=new b.mp2t.TransportPacketStream,l=new b.mp2t.TransportParseStream,m=new b.mp2t.ElementaryStream,n=new b.codecs.AacStream,o=new b.codecs.H264Stream,s=new g(a),k.pipe(l).pipe(m),m.pipe(o),m.pipe(n),m.pipe(this.metadataStream).pipe(s),b.mp2t.CaptionStream&&(r=new b.mp2t.CaptionStream,o.pipe(r).pipe(s)),m.on("data",function(a){var b;if("metadata"===a.type){for(b=a.tracks.length;b--;)h||"video"!==a.tracks[b].type?j||"audio"!==a.tracks[b].type||(j=a.tracks[b],j.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime):(h=a.tracks[b],h.timelineStartInfo.baseMediaDecodeTime=t.baseMediaDecodeTime);h&&!p&&(s.numberOfTracks++,p=new d(h),p.on("timelineStartInfo",function(a){j&&(j.timelineStartInfo=a,q.setEarliestDts(a.dts))}),o.pipe(p).pipe(s)),j&&!q&&(s.numberOfTracks++,q=new e(j),n.pipe(q).pipe(s))}}),this.setBaseMediaDecodeTime=function(a){this.baseMediaDecodeTime=a,j&&(j.timelineStartInfo.dts=c,j.timelineStartInfo.pts=c,i(j),j.timelineStartInfo.baseMediaDecodeTime=a),h&&(h.timelineStartInfo.dts=c,h.timelineStartInfo.pts=c,i(h),h.timelineStartInfo.baseMediaDecodeTime=a)},this.push=function(a){k.push(a)},this.flush=function(){k.flush()},s.on("data",function(a){t.trigger("data",a)}),s.on("done",function(){t.trigger("done")})},f.prototype=new b.utils.Stream,b.mp4=b.mp4||{},b.mp4.VideoSegmentStream=d,b.mp4.AudioSegmentStream=e,b.mp4.Transmuxer=f}(this,this.muxjs);var wireTransmuxerEvents=function(a){a.on("data",function(a){var b=a.data;a.data=b.buffer,postMessage({action:"data",segment:a,byteOffset:b.byteOffset,byteLength:b.byteLength},[a.data])}),a.captionStream&&a.captionStream.on("data",function(a){postMessage({action:"caption",data:a})}),a.on("done",function(a){postMessage({action:"done"})})},messageHandlers={init:function(a){initOptions=a&&a.options||{},this.defaultInit()},defaultInit:function(){transmuxer&&transmuxer.dispose(),transmuxer=new muxjs.mp4.Transmuxer(initOptions),wireTransmuxerEvents(transmuxer)},push:function(a){var b=new Uint8Array(a.data,a.byteOffset,a.byteLength);transmuxer.push(b)},reset:function(){this.defaultInit()},setTimestampOffset:function(a){var b=a.timestampOffset||0;transmuxer.setBaseMediaDecodeTime(Math.round(9e4*b))},flush:function(a){transmuxer.flush()}};onmessage=function(a){transmuxer||"init"===a.data.action||messageHandlers.defaultInit(),a.data&&a.data.action&&messageHandlers[a.data.action]&&messageHandlers[a.data.action](a.data)};'],{type:"application/javascript"}))),this.transmuxer_.postMessage({action:"init",options:{remux:!1}}),this.transmuxer_.onmessage=function(t){return"data"===t.data.action?i.data_(t):"done"===t.data.action?i.done_(t):void 0},Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&t>=0&&(this.timestampOffset_=t,this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:t}))}}),Object.defineProperty(this,"appendWindowStart",{get:function(){return(this.videoBuffer_||this.audioBuffer_).appendWindowStart},set:function(t){this.videoBuffer_&&(this.videoBuffer_.appendWindowStart=t),this.audioBuffer_&&(this.audioBuffer_.appendWindowStart=t)}}),Object.defineProperty(this,"updating",{get:function(){return this.bufferUpdating_||this.audioBuffer_&&this.audioBuffer_.updating||this.videoBuffer_&&this.videoBuffer_.updating}}),Object.defineProperty(this,"buffered",{get:function(){var t=null,e=null,i=0,a=[],s=[];if(!(this.videoBuffer_&&0!==this.videoBuffer_.buffered.length||this.audioBuffer_&&0!==this.audioBuffer_.buffered.length))return videojs.createTimeRange();if(!this.videoBuffer_)return this.audioBuffer_.buffered;if(!this.audioBuffer_)return this.videoBuffer_.buffered;for(var n=this.videoBuffer_.buffered,r=this.audioBuffer_.buffered,o=n.length;o--;)a.push({time:n.start(o),type:"start"}),a.push({time:n.end(o),type:"end"});for(o=r.length;o--;)a.push({time:r.start(o),type:"start"}),a.push({time:r.end(o),type:"end"});for(a.sort((function(t,e){return t.time-e.time})),o=0;o<a.length;o++)"start"===a[o].type?(i++,2===i&&(t=a[o].time)):"end"===a[o].type&&(i--,1===i&&(e=a[o].time)),null!==t&&null!==e&&(s.push([t,e]),t=null,e=null);return videojs.createTimeRanges(s)}})},data_:function(t){var e=t.data.segment,i=this.mediaSource_.mediaSource_;e.data=new Uint8Array(e.data,t.data.byteOffset,t.data.byteLength),"video"===e.type?this.videoBuffer_||(this.videoBuffer_=i.addSourceBuffer('video/mp4;codecs="'+this.codecs_[0]+'"'),this.videoBuffer_.addEventListener("updatestart",n(this,"audioBuffer_","updatestart")),this.videoBuffer_.addEventListener("update",n(this,"audioBuffer_","update")),this.videoBuffer_.addEventListener("updateend",n(this,"audioBuffer_","updateend"))):"audio"===e.type?this.audioBuffer_||(this.audioBuffer_=i.addSourceBuffer('audio/mp4;codecs="'+this.codecs_[1]+'"'),this.audioBuffer_.addEventListener("updatestart",n(this,"videoBuffer_","updatestart")),this.audioBuffer_.addEventListener("update",n(this,"videoBuffer_","update")),this.audioBuffer_.addEventListener("updateend",n(this,"videoBuffer_","updateend"))):"combined"===e.type&&(this.videoBuffer_||(this.videoBuffer_=i.addSourceBuffer('video/mp4;codecs="'+this.codecs_.join(",")+'"'),this.videoBuffer_.addEventListener("updatestart",n(this,"videoBuffer_","updatestart")),this.videoBuffer_.addEventListener("update",n(this,"videoBuffer_","update")),this.videoBuffer_.addEventListener("updateend",n(this,"videoBuffer_","updateend")))),u(this,this.mediaSource_,e),this.pendingBuffers_.push(e)},done_:function(){this.processPendingSegments_()},appendBuffer:function(t){this.bufferUpdating_=!0,this.transmuxer_.postMessage({action:"push",data:t.buffer,byteOffset:t.byteOffset,byteLength:t.byteLength},[t.buffer]),this.transmuxer_.postMessage({action:"flush"})},remove:function(t,e){this.videoBuffer_&&this.videoBuffer_.remove(t,e),this.audioBuffer_&&this.audioBuffer_.remove(t,e),h(t,e,this.metadataTrack_),h(t,e,this.inbandTextTrack_)},processPendingSegments_:function(){var t={video:{segments:[],bytes:0},audio:{segments:[],bytes:0},captions:[],metadata:[]};t=this.pendingBuffers_.reduce((function(t,e){var i=e.type,a=e.data;return"combined"===i&&(i="video"),t[i].segments.push(a),t[i].bytes+=a.byteLength,e.captions&&(t.captions=t.captions.concat(e.captions)),e.metadata&&(t.metadata=t.metadata.concat(e.metadata)),t}),t),c(this,t.captions,t.metadata),this.concatAndAppendSegments_(t.video,this.videoBuffer_),this.concatAndAppendSegments_(t.audio,this.audioBuffer_),this.pendingBuffers_.length=0,this.bufferUpdating_=!1},concatAndAppendSegments_:function(t,e){var i,a=0;t.bytes&&(i=new Uint8Array(t.bytes),t.segments.forEach((function(t){i.set(t,a),a+=t.byteLength})),e.appendBuffer(i))},abort:function(){this.videoBuffer_&&this.videoBuffer_.abort(),this.audioBuffer_&&this.audioBuffer_.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"reset"}),this.pendingBuffers_.length=0,this.bufferUpdating_=!1}}),videojs.FlashMediaSource=videojs.extend(f,{constructor:function(){var t=this;this.sourceBuffers=[],this.readyState="closed",this.on(["sourceopen","webkitsourceopen"],(function(e){this.swfObj=document.getElementById(e.swfId),this.player_=videojs(this.swfObj.parentNode),this.tech_=this.swfObj.tech,this.readyState="open",this.tech_.on("seeking",(function(){for(var e=t.sourceBuffers.length;e--;)t.sourceBuffers[e].abort()})),this.swfObj&&this.swfObj.vjs_load()}))},addSeekableRange_:function(){}}),videojs.FlashMediaSource.TIME_BETWEEN_TICKS=Math.floor(1e3/480),videojs.FlashMediaSource.TIME_PER_TICK=Math.floor(1e3/240),videojs.FlashMediaSource.BYTES_PER_CHUNK=1024,videojs.FlashMediaSource.MIN_CHUNK=1024,videojs.FlashMediaSource.MAX_CHUNK=1048576,videojs.FlashMediaSource.prototype.addSourceBuffer=function(t){var e;if(0!==t.indexOf("video/mp2t"))throw new Error("NotSupportedError (Video.js)");return e=new videojs.FlashSourceBuffer(this),this.sourceBuffers.push(e),e};try{Object.defineProperty(videojs.FlashMediaSource.prototype,"duration",{get:function(){return this.swfObj?this.swfObj.vjs_getProperty("duration"):NaN},set:function(t){var e,i=this.swfObj.vjs_getProperty("duration");if(this.swfObj.vjs_setProperty("duration",t),i>t)for(e=0;e<this.sourceBuffers.length;e++)this.sourceBuffers[e].remove(t,i);return t}})}catch(m){videojs.FlashMediaSource.prototype.duration=NaN}videojs.FlashMediaSource.prototype.endOfStream=function(t){"network"===t?this.tech_.error(2):"decode"===t&&this.tech_.error(3),"ended"!==this.readyState&&(this.readyState="ended",this.swfObj.vjs_endOfStream())},videojs.mediaSources={},videojs.MediaSource.open=function(t,e){var i=videojs.mediaSources[t];if(!i)throw new Error("Media Source not found (Video.js)");i.trigger({type:"sourceopen",swfId:e})},r=function(e){t.setTimeout(e,videojs.FlashMediaSource.TIME_BETWEEN_TICKS)},videojs.FlashSourceBuffer=videojs.extend(f,{constructor:function(i){var a,s=this;this.chunkSize_=videojs.FlashMediaSource.BYTES_PER_CHUNK,this.buffer_=[],this.bufferSize_=0,this.basePtsOffset_=NaN,this.mediaSource=i,this.updating=!1,this.timestampOffset_=0,this.segmentParser_=new e.flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),a=t.btoa(String.fromCharCode.apply(null,Array.prototype.slice.call(this.segmentParser_.getFlvHeader()))),this.mediaSource.swfObj.vjs_appendBuffer(a),Object.defineProperty(this,"timestampOffset",{get:function(){return this.timestampOffset_},set:function(t){"number"==typeof t&&t>=0&&(this.timestampOffset_=t,this.segmentParser_=new e.flv.Transmuxer,this.segmentParser_.on("data",this.receiveBuffer_.bind(this)),this.mediaSource.swfObj.vjs_discontinuity(),this.basePtsOffset_=NaN)}}),Object.defineProperty(this,"buffered",{get:function(){return videojs.createTimeRanges(this.mediaSource.swfObj.vjs_getProperty("buffered"))}}),this.mediaSource.player_.on("seeked",(function(){h(0,1/0,s.metadataTrack_),h(0,1/0,s.inbandTextTrack_)}))},appendBuffer:function(t){var e,i=this;if(this.updating)throw e=new Error("SourceBuffer.append() cannot be called while an update is in progress"),e.name="InvalidStateError",e.code=11,e;this.updating=!0,this.mediaSource.readyState="open",this.trigger({type:"update"});var a=524288,s=0;!function e(){i.segmentParser_.push(t.subarray(s,s+a)),s+=a,r(s<t.byteLength?e:i.segmentParser_.flush.bind(i.segmentParser_))}()},abort:function(){this.buffer_=[],this.bufferSize_=0,this.mediaSource.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))},remove:function(t,e){h(t,e,this.metadataTrack_),h(t,e,this.inbandTextTrack_),this.trigger({type:"update"}),this.trigger({type:"updateend"})},receiveBuffer_:function(t){var e=this;u(this,this.mediaSource,t),c(this,t.captions,t.metadata),r((function(){0===e.buffer_.length&&r(e.processBuffer_.bind(e));var i=e.convertTagsToData_(t);i&&(e.buffer_.push(i),e.bufferSize_+=i.byteLength)}))},processBuffer_:function(){var e,i,a,s,n,o,d=0,h=0,u=+new Date;if(this.buffer_.length){do{for(h++,e=this.buffer_[0].subarray(d,d+this.chunkSize_),e.byteLength<this.chunkSize_||this.buffer_[0].byteLength===d+this.chunkSize_?(d=0,this.buffer_.shift()):d+=this.chunkSize_,this.bufferSize_-=e.byteLength,s="",a=e.byteLength,i=0;a>i;i++)s+=String.fromCharCode(e[i]);n=t.btoa(s),this.mediaSource.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+n+"</string></arguments></invoke>"),o=new Date-u}while(this.buffer_.length&&o<videojs.FlashMediaSource.TIME_PER_TICK);this.buffer_.length&&d&&(this.buffer_[0]=this.buffer_[0].subarray(d)),o>=videojs.FlashMediaSource.TIME_PER_TICK&&(this.chunkSize_=Math.floor(this.chunkSize_*(h/4))),this.chunkSize_=Math.max(videojs.FlashMediaSource.MIN_CHUNK,Math.min(this.chunkSize_,videojs.FlashMediaSource.MAX_CHUNK)),0!==this.bufferSize_?r(this.processBuffer_.bind(this)):(this.updating=!1,this.trigger({type:"updateend"}))}else!1!==this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))},convertTagsToData_:function(t){var e,i,a,s=0,n=this.mediaSource.tech_,r=0,o=[],d=this.getOrderedTags_(t);for(isNaN(this.basePtsOffset_)&&d.length&&(this.basePtsOffset_=d[0].pts),n.buffered().length&&(r=n.buffered().end(0)-this.timestampOffset),r=Math.max(r,n.currentTime()-this.timestampOffset),r*=1e3,r+=this.basePtsOffset_,e=0;e<d.length;e++)d[e].pts>=r&&o.push(d[e]);if(0!==o.length){for(e=0;e<o.length;e++)s+=o[e].bytes.byteLength;for(a=new Uint8Array(s),e=0,i=0;e<o.length;e++)a.set(o[e].bytes,i),i+=o[e].bytes.byteLength;return a}},getOrderedTags_:function(t){for(var e,i=t.tags.videoTags,a=t.tags.audioTags,s=[];i.length||a.length;)e=i.length?a.length&&a[0].dts<i[0].dts?a.shift():i.shift():a.shift(),s.push(e.finalize());return s}}),videojs.URL={createObjectURL:function(e){var i;return e instanceof videojs.HtmlMediaSource?(i=t.URL.createObjectURL(e.mediaSource_),e.url_=i,i):e instanceof videojs.FlashMediaSource?(i=l+p,p++,videojs.mediaSources[i]=e,i):(i=t.URL.createObjectURL(e),e.url_=i,i)}}}(this,this.muxjs),function(t,e,i,a){"use strict";var s,n,r,o=1.2,d=3e5,h=1/30,u=e.getComponent("Component"),c=500;n=function(t){return t.retries&&t.retries>=2},e.Hls={},e.HlsHandler=e.extend(u,{constructor:function(t,i){var a,s=this;u.call(this,t),t.options_&&t.options_.playerId&&(a=e(t.options_.playerId),a.hls||Object.defineProperty(a,"hls",{get:function(){return e.log.warn("player.hls is deprecated. Use player.tech.hls instead."),s}})),this.tech_=t,this.source_=i.source,this.mode_=i.mode,this.pendingSegment_=null,this.bandwidth=i.bandwidth||4194304,this.bytesReceived=0,this.loadingState_="none","none"!==this.tech_.preload()&&(this.loadingState_="meta"),this.startCheckingBuffer_(),this.on(this.tech_,"seeking",(function(){this.setCurrentTime(this.tech_.currentTime())})),this.on(this.tech_,"error",(function(){this.stopCheckingBuffer_()})),this.on(this.tech_,"play",this.play)}}),e.Hls.canPlaySource=function(){return e.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},e.HlsSourceHandler=function(t){return{canHandleSource:function(t){return e.HlsSourceHandler.canPlayType(t.type)},handleSource:function(i,a){return"flash"===t&&a.setTimeout((function(){a.trigger("loadstart")}),1),a.hls=new e.HlsHandler(a,{source:i,mode:t}),a.hls.src(i.src),a.hls},canPlayType:function(t){return e.HlsSourceHandler.canPlayType(t)}}},e.HlsSourceHandler.canPlayType=function(t){var i=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return!e.Hls.supportsNativeHls&&i.test(t)},e.MediaSource.supportsNativeMediaSources()&&e.getComponent("Html5").registerSourceHandler(e.HlsSourceHandler("html5")),t.Uint8Array&&e.getComponent("Flash").registerSourceHandler(e.HlsSourceHandler("flash")),e.Hls.GOAL_BUFFER_LENGTH=30,e.HlsHandler.prototype.src=function(t){var i;t&&(this.mediaSource=new e.MediaSource({mode:this.mode_}),this.mediaSource.addEventListener("sourceopen",this.handleSourceOpen.bind(this)),this.options_={},this.source_.withCredentials!==a?this.options_.withCredentials=this.source_.withCredentials:e.options.hls&&(this.options_.withCredentials=e.options.hls.withCredentials),this.playlists=new e.Hls.PlaylistLoader(this.source_.src,this.options_.withCredentials),this.tech_.one("canplay",this.setupFirstPlay.bind(this)),this.playlists.on("loadedmetadata",function(){i=this.playlists.media(),i.endList&&"metadata"!==this.tech_.preload()&&"none"!==this.tech_.preload()&&(this.loadingState_="segments"),this.setupSourceBuffer_(),this.setupFirstPlay(),this.fillBuffer(),this.tech_.trigger("loadedmetadata")}.bind(this)),this.playlists.on("error",function(){this.blacklistCurrentPlaylist_(this.playlists.error)}.bind(this)),this.playlists.on("loadedplaylist",function(){var t,e=this.playlists.media();return e?(this.updateDuration(this.playlists.media()),t=this.seekable(),this.duration()===1/0&&0!==t.length&&this.mediaSource.addSeekableRange_(t.start(0),t.end(0)),void(i=e)):void this.playlists.media(this.selectPlaylist())}.bind(this)),this.playlists.on("mediachange",function(){this.tech_.trigger({type:"mediachange",bubbles:!0})}.bind(this)),this.tech_.el()&&this.tech_.src(e.URL.createObjectURL(this.mediaSource)))},e.HlsHandler.prototype.handleSourceOpen=function(){this.sourceBuffer||this.setupSourceBuffer_(),this.tech_.autoplay()&&this.play()},e.Hls.findSoleUncommonTimeRangesEnd_=function(t,e){var i,a,s,n=[],r=[],o=function(t){return t[0]<=s&&t[1]>=s};if(t)for(i=0;i<t.length;i++)a=t.start(i),s=t.end(i),r.push([a,s]);if(e)for(i=0;i<e.length;i++)a=e.start(i),s=e.end(i),r.some(o)||n.push(s);return 1!==n.length?null:n[0]},e.HlsHandler.prototype.updateSegmentMetadata_=function(t,e,i){var a,s;t&&(a=t.segments[e],s=t.segments[e-1],i&&a&&(a.end=i,s?s.end&&(a.duration=a.end-s.end):a.duration=a.end))},e.HlsHandler.prototype.isEndOfStream_=function(t,e,i){var a,s,n=t.segments;return!!t&&(a=e===n.length-1,s=i.length&&n[n.length-1].end<=i.end(0),t.endList&&"open"===this.mediaSource.readyState&&(a||s))};var p=function(t){var e={codecCount:0,videoCodec:null,audioProfile:null};return e.codecCount=t.split(",").length,e.codecCount=e.codecCount||2,e.videoCodec=/(^|\s|,)+(avc1)[^ ,]*/i.exec(t),e.videoCodec=e.videoCodec&&e.videoCodec[2],e.audioProfile=/(^|\s|,)+mp4a.\d+\.(\d+)/i.exec(t),e.audioProfile=e.audioProfile&&e.audioProfile[2],e};e.HlsHandler.prototype.excludeIncompatibleVariants_=function(t){var e,i=this.playlists.master,a=2,s=null,n=null;t.attributes&&t.attributes.CODECS&&(e=p(t.attributes.CODECS),s=e.videoCodec,n=e.audioProfile,a=e.codecCount),i.playlists.forEach((function(t){var e={codecCount:2,videoCodec:null,audioProfile:null};t.attributes&&t.attributes.CODECS&&(e=p(t.attributes.CODECS)),e.codecCount!==a&&(t.excludeUntil=1/0),e.videoCodec!==s&&(t.excludeUntil=1/0),("5"===e.audioProfile&&"5"!==n||"5"===n&&"5"!==e.audioProfile)&&(t.excludeUntil=1/0)}))},e.HlsHandler.prototype.setupSourceBuffer_=function(){var t,e=this.playlists.media();e&&"open"===this.mediaSource.readyState&&(t="video/mp2t",e.attributes&&e.attributes.CODECS&&(t+='; codecs="'+e.attributes.CODECS+'"'),this.sourceBuffer=this.mediaSource.addSourceBuffer(t),this.excludeIncompatibleVariants_(e),this.sourceBuffer.addEventListener("updateend",this.updateEndHandler_.bind(this)))},e.HlsHandler.prototype.setupFirstPlay=function(){var t,e;e=this.playlists.media(),this.duration()===1/0&&0===this.tech_.played().length&&!this.tech_.paused()&&this.sourceBuffer&&e&&this.tech_.readyState()>=1&&(this.playlists.trigger("firstplay"),t=this.seekable(),t.length&&this.tech_.setCurrentTime(t.end(0)))},e.HlsHandler.prototype.play=function(){return this.loadingState_="segments",this.tech_.ended()&&this.tech_.setCurrentTime(0),0===this.tech_.played().length?this.setupFirstPlay():void(this.duration()===1/0&&this.tech_.currentTime()<this.seekable().start(0)&&this.tech_.setCurrentTime(this.seekable().start(0)))},e.HlsHandler.prototype.setCurrentTime=function(t){var e=this.findBufferedRange_();return this.playlists&&this.playlists.media()&&this.playlists.media().segments?e&&e.length||this.pendingSegment_&&this.pendingSegment_.buffered?t:(this.lastSegmentLoaded_=null,this.cancelSegmentXhr(),this.keyXhr_&&(this.keyXhr_.aborted=!0,this.cancelKeyXhr()),void this.fillBuffer(this.playlists.getMediaIndexForTime_(t))):0},e.HlsHandler.prototype.duration=function(){var t=this.playlists;return t?this.mediaSource?this.mediaSource.duration:e.Hls.Playlist.duration(t.media()):0},e.HlsHandler.prototype.seekable=function(){var t,i;return this.playlists&&(t=this.playlists.media())?(i=e.Hls.Playlist.seekable(t),0===i.length?i:0===i.start(0)?e.createTimeRanges([[this.playlists.expired_,this.playlists.expired_+i.end(0)]]):i):e.createTimeRanges()},e.HlsHandler.prototype.updateDuration=function(t){var i=this.mediaSource.duration,a=e.Hls.Playlist.duration(t),s=this.tech_.buffered(),n=function(){this.mediaSource.duration=a,this.tech_.trigger("durationchange"),this.mediaSource.removeEventListener("sourceopen",n)}.bind(this);s.length>0&&(a=Math.max(a,s.end(s.length-1))),i!==a&&("open"!==this.mediaSource.readyState?this.mediaSource.addEventListener("sourceopen",n):this.sourceBuffer&&this.sourceBuffer.updating||(this.mediaSource.duration=a,this.tech_.trigger("durationchange")))},e.HlsHandler.prototype.resetSrc_=function(){this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&"open"===this.mediaSource.readyState&&this.sourceBuffer.abort()},e.HlsHandler.prototype.cancelKeyXhr=function(){this.keyXhr_&&(this.keyXhr_.onreadystatechange=null,this.keyXhr_.abort(),this.keyXhr_=null)},e.HlsHandler.prototype.cancelSegmentXhr=function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null),this.pendingSegment_=null},s=function(t,e){var i;return t?(i=getComputedStyle(t),i?i[e]:""):""},e.HlsHandler.prototype.dispose=function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),u.prototype.dispose.call(this)},e.HlsHandler.prototype.selectPlaylist=function(){var t,i,n,r,d,h,u,c,p=this.playlists.master.playlists.slice(),f=[],l=+new Date;for(p.sort(e.Hls.comparePlaylistBandwidth),p=p.filter((function(t){return t.excludeUntil===a||l>=t.excludeUntil})),i=p.length;i--;)n=p[i],n.attributes&&n.attributes.BANDWIDTH&&(t=n.attributes.BANDWIDTH*o,t<this.bandwidth&&(f.push(n),r||(r=n)));for(i=f.length,f.sort(e.Hls.comparePlaylistResolution),n=null,u=parseInt(s(this.tech_.el(),"width"),10),c=parseInt(s(this.tech_.el(),"height"),10);i--;)if(n=f[i],n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&n.attributes.RESOLUTION.height){if(n.attributes.RESOLUTION.width===u&&n.attributes.RESOLUTION.height===c){d=null,h=n;break}if(n.attributes.RESOLUTION.width<u&&n.attributes.RESOLUTION.height<c)break;(!d||n.attributes.RESOLUTION.width<d.attributes.RESOLUTION.width&&n.attributes.RESOLUTION.height<d.attributes.RESOLUTION.height)&&(d=n)}return d||h||r||p[0]},e.HlsHandler.prototype.checkBuffer_=function(){this.checkBufferTimeout_&&(t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=t.setTimeout(this.checkBuffer_.bind(this),c)},e.HlsHandler.prototype.startCheckingBuffer_=function(){this.checkBuffer_()},e.HlsHandler.prototype.stopCheckingBuffer_=function(){this.checkBufferTimeout_&&(t.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)};var f=function(t){return function(i){var s,n=[],r=this.tech_,o=r.buffered();if(i===a&&(i=r.currentTime()),!this.mediaSource||this.mediaSource.mediaSource_&&!this.mediaSource.mediaSource_.sourceBuffers.length)return e.createTimeRanges([]);if(o&&o.length)for(s=0;s<o.length;s++)t(o.start(s),o.end(s),i)&&n.push([o.start(s),o.end(s)]);return e.createTimeRanges(n)}};e.HlsHandler.prototype.findBufferedRange_=f((function(t,e,i){return i>=t-h&&e+h>=i})),e.HlsHandler.prototype.findNextBufferedRange_=f((function(t,e,i){return t-h>=i})),e.HlsHandler.prototype.fillBuffer=function(t){var i,s,n,r=this.tech_,o=r.currentTime(),d=0!==this.tech_.buffered().length,h=this.findBufferedRange_(),u=!(h&&h.length),c=0,p=0;if("segments"===this.loadingState_&&r.currentSrc()&&this.playlists&&!this.segmentXhr_&&!this.pendingSegment_&&"HAVE_NOTHING"!==this.playlists.state&&this.playlists.media()&&this.playlists.media().segments&&"SWITCHING_MEDIA"!==this.playlists.state){if(t===a)if(h&&h.length){if(c=h.end(0),t=this.playlists.getMediaIndexForTime_(c),p=Math.max(0,c-o),p>=e.Hls.GOAL_BUFFER_LENGTH)return}else t=this.playlists.getMediaIndexForTime_(this.tech_.currentTime());if(i=this.playlists.media().segments[t]){if(this.lastSegmentLoaded_&&this.playlistUriToUrl(this.lastSegmentLoaded_.uri)===this.playlistUriToUrl(i.uri)&&this.lastSegmentLoaded_.byterange===i.byterange)return this.fillBuffer(t+1);s={uri:this.playlistUriToUrl(i.uri),mediaIndex:t,mediaSequence:this.playlists.media().mediaSequence,playlist:this.playlists.media(),currentBufferedEnd:c,bytes:null,encryptedBytes:null,decrypter:null,buffered:null,timestampOffset:null},t>0&&(n=e.Hls.Playlist.duration(s.playlist,s.playlist.mediaSequence+t)+this.playlists.expired_),this.tech_.seeking()&&u?s.playlist.discontinuityStarts.length&&(s.timestampOffset=n):i.discontinuity&&h.length?s.timestampOffset=h.end(0):!d&&this.tech_.currentTime()>.05&&(s.timestampOffset=n),this.loadSegment(s)}}},e.HlsHandler.prototype.playlistUriToUrl=function(t){return this.playlists.media().uri===this.source_.src?r(this.source_.src,t):r(r(this.source_.src,this.playlists.media().uri||""),t)},e.HlsHandler.prototype.byterangeStr_=function(t){var e,i;return i=t.offset+t.length-1,e=t.offset,"bytes="+e+"-"+i},e.HlsHandler.prototype.segmentXhrHeaders_=function(t){var e={};return"byterange"in t&&(e.Range=this.byterangeStr_(t.byterange)),e},e.HlsHandler.prototype.setBandwidth=function(t){this.segmentXhrTime=t.roundTripTime,this.bandwidth=t.bandwidth,this.bytesReceived+=t.bytesReceived||0,this.tech_.trigger("bandwidthupdate")},e.HlsHandler.prototype.blacklistCurrentPlaylist_=function(t){var i,a;return(i=t.playlist||this.playlists.media())?(i.excludeUntil=Date.now()+d,a=this.selectPlaylist(),a?(e.log.warn("Problem encountered with the current HLS playlist. Switching to another playlist."),this.playlists.media(a)):(e.log.warn("Problem encountered with the current HLS playlist. No suitable alternatives found."),this.error=t,this.mediaSource.endOfStream("network"))):(this.error=t,this.mediaSource.endOfStream("network"))},e.HlsHandler.prototype.loadSegment=function(t){var i=this,a=t.playlist.segments[t.mediaIndex],s=0,n=this.seekable(),r=this.tech_.currentTime();this.sourceBuffer&&!this.sourceBuffer.updating&&(s=n.length&&n.start(0)>0&&n.start(0)<r?n.start(0):r-60,s>0&&this.sourceBuffer.remove(0,s)),a.key&&this.fetchKey_(a),this.segmentXhr_=e.Hls.xhr({uri:t.uri,responseType:"arraybuffer",withCredentials:this.source_.withCredentials,timeout:1.5*a.duration*1e3,headers:this.segmentXhrHeaders_(a)},(function(e,s){return i.segmentXhr_&&s===i.segmentXhr_?(i.segmentXhr_=null,s.timedout?(i.bandwidth=1,i.playlists.media(i.selectPlaylist())):!s.aborted&&e?i.blacklistCurrentPlaylist_({status:s.status,message:"HLS segment request error at URL: "+t.uri,code:s.status>=500?4:2}):void(s.response&&(i.lastSegmentLoaded_=a,i.setBandwidth(s),a.key?t.encryptedBytes=new Uint8Array(s.response):t.bytes=new Uint8Array(s.response),i.pendingSegment_=t,i.tech_.trigger("progress"),i.drainBuffer(),i.playlists.media(i.selectPlaylist())))):void 0}))},e.HlsHandler.prototype.drainBuffer=function(){var t,i,a,s,r,o,d;if(this.pendingSegment_&&this.sourceBuffer&&!this.pendingSegment_.buffered&&!this.sourceBuffer.updating){if(t=this.pendingSegment_,i=t.mediaIndex,a=t.playlist,t.offset,s=t.bytes,r=a.segments[i],r.key&&!s)return n(r.key)?this.blacklistCurrentPlaylist_({message:"HLS segment key request error.",code:4}):r.key.bytes?t.decrypter?void 0:(d=r.key.iv||new Uint32Array([0,0,0,i+a.mediaSequence]),o=new e.Hls.Decrypter(t.encryptedBytes,r.key.bytes,d,(function(e,i){t.bytes=i})),void(t.decrypter=o)):void 0;this.pendingSegment_.buffered=this.tech_.buffered(),null!==t.timestampOffset&&(this.sourceBuffer.timestampOffset=t.timestampOffset),this.sourceBuffer.appendBuffer(s)}},e.HlsHandler.prototype.updateEndHandler_=function(){var t,i,a,s,n,r,o=this.pendingSegment_;if(o&&o.buffered){if(this.pendingSegment_=null,t=o.playlist,t.segments,i=o.mediaIndex+(o.mediaSequence-t.mediaSequence),a=this.findBufferedRange_(),r=this.isEndOfStream_(t,i,a),o.playlist.uri!==this.playlists.media().uri)return r?this.mediaSource.endOfStream():this.fillBuffer();if(t.segments[i],s=this.seekable(),this.tech_.seeking()&&0===a.length&&s.length&&this.tech_.currentTime()<s.start(0)){var d=this.findNextBufferedRange_();d.length&&(e.log("tried seeking to",this.tech_.currentTime(),"but that was too early, retrying at",d.start(0)),this.tech_.setCurrentTime(d.start(0)+h))}return n=e.Hls.findSoleUncommonTimeRangesEnd_(o.buffered,this.tech_.buffered()),this.updateSegmentMetadata_(t,i,n),r?this.mediaSource.endOfStream():null!==n||o.buffered.length!==this.tech_.buffered().length?(this.updateDuration(t),void this.fillBuffer()):void this.fillBuffer(i+1)}},e.HlsHandler.prototype.fetchKey_=function(t){var i,a,s,r;if(!this.keyXhr_&&(a=this,s=this.options_,r=function(e){return function(i,s){var n;return a.keyXhr_=null,i||!s.response||16!==s.response.byteLength?(e.retries=e.retries||0,e.retries++,void(s.aborted||a.fetchKey_(t))):(n=new DataView(s.response),e.bytes=new Uint32Array([n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12)]),void a.checkBuffer_())}},i=t.key))return i.bytes||n(i)?void 0:void(this.keyXhr_=e.Hls.xhr({uri:this.playlistUriToUrl(i.uri),responseType:"arraybuffer",withCredentials:s.withCredentials},r(i)))},e.Hls.supportsNativeHls=function(){var t,a,s=i.createElement("video");return!!e.getComponent("Html5").isSupported()&&(t=s.canPlayType("application/x-mpegURL"),a=s.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(t)||/probably|maybe/.test(a))}(),e.Hls.isSupported=function(){return e.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")},e.Hls.comparePlaylistBandwidth=function(e,i){var a,s;return e.attributes&&e.attributes.BANDWIDTH&&(a=e.attributes.BANDWIDTH),a=a||t.Number.MAX_VALUE,i.attributes&&i.attributes.BANDWIDTH&&(s=i.attributes.BANDWIDTH),s=s||t.Number.MAX_VALUE,a-s},e.Hls.comparePlaylistResolution=function(e,i){var a,s;return e.attributes&&e.attributes.RESOLUTION&&e.attributes.RESOLUTION.width&&(a=e.attributes.RESOLUTION.width),a=a||t.Number.MAX_VALUE,i.attributes&&i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(s=i.attributes.RESOLUTION.width),s=s||t.Number.MAX_VALUE,a===s&&e.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?e.attributes.BANDWIDTH-i.attributes.BANDWIDTH:a-s},r=e.Hls.resolveUrl=function(t,e){var a,s,n=i.querySelector("base"),r=i.querySelector("head"),o=i.createElement("a"),d=n;return n?a=n.href:d=r.appendChild(i.createElement("base")),d.href=t,o.href=e,s=o.href,n?n.href=a:r.removeChild(d),s}}(window,window.videojs,document),function(t){"use strict";t.Hls.xhr=function(e,i){e=t.mergeOptions({timeout:45e3},e);var a=t.xhr(e,(function(t,e){!t&&a.response&&(a.responseTime=(new Date).getTime(),a.roundTripTime=a.responseTime-a.requestTime,a.bytesReceived=a.response.byteLength||a.response.length,a.bandwidth||(a.bandwidth=Math.floor(a.bytesReceived/a.roundTripTime*8*1e3))),t||a.timedout?a.timedout=a.timedout||"ETIMEDOUT"===t.code:a.timedout=!1,t||200===e.statusCode||206===e.statusCode||0===e.statusCode||(t=new Error("XHR Failed with a response of: "+(a&&(a.response||a.responseText)))),i(t,a)}));return a.requestTime=(new Date).getTime(),a}}(window.videojs),function(t,e){var i=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e].push(i)},this.off=function(e,i){var a;return!!t[e]&&(a=t[e].indexOf(i),t[e].splice(a,1),a>-1)},this.trigger=function(e){var i,a,s,n;if(i=t[e])if(2===arguments.length)for(s=i.length,a=0;s>a;++a)i[a].call(this,arguments[1]);else for(n=Array.prototype.slice.call(arguments,1),s=i.length,a=0;s>a;++a)i[a].apply(this,n)},this.dispose=function(){t={}}}};i.prototype.pipe=function(t){this.on("data",(function(e){t.push(e)}))},t.Hls.Stream=i}(window.videojs),function(t,e,i,a,s){var n,r,o,d=function(){},h=function(){var t="[^=]*",e='"[^"]*"|[^,]*',i="(?:"+t+")=(?:"+e+")";return new RegExp("(?:^|,)("+i+")")}(),u=function(t){for(var e,i=t.split(h),a=i.length,s={};a--;)""!==i[a]&&(e=/([^=]*)=(.*)/.exec(i[a]).slice(1),e[0]=e[0].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^\s+|\s+$/g,""),e[1]=e[1].replace(/^['"](.*)['"]$/g,"$1"),s[e[0]]=e[1]);return s},c=t.Hls.Stream;n=function(){var t="";n.prototype.init.call(this),this.push=function(e){var i;for(t+=e,i=t.indexOf("\n");i>-1;i=t.indexOf("\n"))this.trigger("data",t.substring(0,i)),t=t.substring(i+1)}},n.prototype=new c,r=function(){r.prototype.init.call(this)},r.prototype=new c,r.prototype.push=function(t){var i,a;return t=t.replace(/^[\u0000\s]+|[\u0000\s]+$/g,""),0!==t.length?"#"!==t[0]?void this.trigger("data",{type:"uri",uri:t}):0!==t.indexOf("#EXT")?void this.trigger("data",{type:"comment",text:t.slice(1)}):(t=t.replace("\r",""),(i=/^#EXTM3U/.exec(t))?void this.trigger("data",{type:"tag",tagType:"m3u"}):(i=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(t))?(a={type:"tag",tagType:"inf"},i[1]&&(a.duration=parseFloat(i[1])),i[2]&&(a.title=i[2]),void this.trigger("data",a)):(i=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(t))?(a={type:"tag",tagType:"targetduration"},i[1]&&(a.duration=e(i[1],10)),void this.trigger("data",a)):(i=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(t))?(a={type:"tag",tagType:"totalduration"},i[1]&&(a.duration=e(i[1],10)),void this.trigger("data",a)):(i=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(t))?(a={type:"tag",tagType:"version"},i[1]&&(a.version=e(i[1],10)),void this.trigger("data",a)):(i=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(a={type:"tag",tagType:"media-sequence"},i[1]&&(a.number=e(i[1],10)),void this.trigger("data",a)):(i=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(t))?(a={type:"tag",tagType:"discontinuity-sequence"},i[1]&&(a.number=e(i[1],10)),void this.trigger("data",a)):(i=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(t))?(a={type:"tag",tagType:"playlist-type"},i[1]&&(a.playlistType=i[1]),void this.trigger("data",a)):(i=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(t))?(a={type:"tag",tagType:"byterange"},i[1]&&(a.length=e(i[1],10)),i[2]&&(a.offset=e(i[2],10)),void this.trigger("data",a)):(i=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(t))?(a={type:"tag",tagType:"allow-cache"},i[1]&&(a.allowed=!/NO/.test(i[1])),void this.trigger("data",a)):(i=/^#EXT-X-STREAM-INF:?(.*)$/.exec(t))?(a={type:"tag",tagType:"stream-inf"},i[1]&&(a.attributes=u(i[1]),a.attributes.RESOLUTION&&function(){var t=a.attributes.RESOLUTION.split("x"),i={};t[0]&&(i.width=e(t[0],10)),t[1]&&(i.height=e(t[1],10)),a.attributes.RESOLUTION=i}(),a.attributes.BANDWIDTH&&(a.attributes.BANDWIDTH=e(a.attributes.BANDWIDTH,10)),a.attributes["PROGRAM-ID"]&&(a.attributes["PROGRAM-ID"]=e(a.attributes["PROGRAM-ID"],10))),void this.trigger("data",a)):(i=/^#EXT-X-ENDLIST/.exec(t))?void this.trigger("data",{type:"tag",tagType:"endlist"}):(i=/^#EXT-X-DISCONTINUITY/.exec(t))?void this.trigger("data",{type:"tag",tagType:"discontinuity"}):(i=/^#EXT-X-KEY:?(.*)$/.exec(t))?(a={type:"tag",tagType:"key"},i[1]&&(a.attributes=u(i[1]),a.attributes.IV&&("0x"===a.attributes.IV.substring(0,2)&&(a.attributes.IV=a.attributes.IV.substring(2)),a.attributes.IV=a.attributes.IV.match(/.{8}/g),a.attributes.IV[0]=e(a.attributes.IV[0],16),a.attributes.IV[1]=e(a.attributes.IV[1],16),a.attributes.IV[2]=e(a.attributes.IV[2],16),a.attributes.IV[3]=e(a.attributes.IV[3],16),a.attributes.IV=new Uint32Array(a.attributes.IV))),void this.trigger("data",a)):void this.trigger("data",{type:"tag",data:t.slice(4,t.length)})):void 0},o=function(){var t,e=this,h=[],u={};o.prototype.init.call(this),this.lineStream=new n,this.parseStream=new r,this.lineStream.pipe(this.parseStream),this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",(function(n){({tag:function(){({"allow-cache":function(){this.manifest.allowCache=n.allowed,"allowed"in n||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var t={};"length"in n&&(u.byterange=t,t.length=n.length,"offset"in n||(this.trigger("info",{message:"defaulting offset to zero"}),n.offset=0)),"offset"in n&&(u.byterange=t,t.offset=n.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),n.duration>=0&&(u.duration=n.duration),this.manifest.segments=h},key:function(){return n.attributes?"NONE"===n.attributes.METHOD?void(t=null):n.attributes.URI?(n.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),t={method:n.attributes.METHOD||"AES-128",uri:n.attributes.URI},void(n.attributes.IV!==s&&(t.iv=n.attributes.IV))):void this.trigger("warn",{message:"ignoring key declaration without URI"}):void this.trigger("warn",{message:"ignoring key declaration without attribute list"})},"media-sequence":function(){return i(n.number)?void(this.manifest.mediaSequence=n.number):void this.trigger("warn",{message:"ignoring invalid media sequence: "+n.number})},"discontinuity-sequence":function(){return i(n.number)?void(this.manifest.discontinuitySequence=n.number):void this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+n.number})},"playlist-type":function(){return/VOD|EVENT/.test(n.playlistType)?void(this.manifest.playlistType=n.playlistType):void this.trigger("warn",{message:"ignoring unknown playlist type: "+n.playlist})},"stream-inf":function(){return this.manifest.playlists=h,n.attributes?(u.attributes||(u.attributes={}),void(u.attributes=a(u.attributes,n.attributes))):void this.trigger("warn",{message:"ignoring empty stream-inf attributes"})},discontinuity:function(){u.discontinuity=!0,this.manifest.discontinuityStarts.push(h.length)},targetduration:function(){return!i(n.duration)||n.duration<0?void this.trigger("warn",{message:"ignoring invalid target duration: "+n.duration}):void(this.manifest.targetDuration=n.duration)},totalduration:function(){return!i(n.duration)||n.duration<0?void this.trigger("warn",{message:"ignoring invalid total duration: "+n.duration}):void(this.manifest.totalDuration=n.duration)}}[n.tagType]||d).call(e)},uri:function(){u.uri=n.uri,h.push(u),!this.manifest.targetDuration||"duration"in u||(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),u.duration=this.manifest.targetDuration),t&&(u.key=t),u={}},comment:function(){}})[n.type].call(e)}))},o.prototype=new c,o.prototype.push=function(t){this.lineStream.push(t)},o.prototype.end=function(){this.lineStream.push("\n")},window.videojs.m3u8={LineStream:n,ParseStream:r,Parser:o}}(window.videojs,window.parseInt,window.isFinite,window.videojs.mergeOptions),function(t,e){"use strict";var i,a,s,n,r,o={UNSAFE_LIVE_SEGMENTS:3};s=function(t,e){var i,a,s=0;if(a=e-t.mediaSequence,i=t.segments[a]){if(void 0!==i.start)return{result:i.start,precise:!0};if(void 0!==i.end)return{result:i.end-i.duration,precise:!0}}for(;a--;){if(i=t.segments[a],void 0!==i.end)return{result:s+i.end,precise:!0};if(s+=i.duration,void 0!==i.start)return{result:s+i.start,precise:!0}}return{result:s,precise:!1}},n=function(t,e){var i,a,s=0;for(a=e-t.mediaSequence;a<t.segments.length;a++){if(i=t.segments[a],void 0!==i.start)return{result:i.start-s,precise:!0};if(s+=i.duration,void 0!==i.end)return{result:i.end-s,precise:!0}}return{result:-1,precise:!1}},a=function(t,e){var i,a;return void 0===e&&(e=t.mediaSequence+t.segments.length),e<t.mediaSequence?0:(i=s(t,e),i.precise?i.result:(a=n(t,e),a.precise?a.result:i.result))},i=function(e,i,s){if(!e)return 0;if(void 0===s&&(s=!0),void 0===i){if(e.totalDuration)return e.totalDuration;if(!e.endList)return t.Infinity}return a(e,i,s)},r=function(t){var s,n;return t.segments?t.endList?e.createTimeRange(0,i(t)):(s=a(t,t.mediaSequence),n=a(t,t.mediaSequence+Math.max(0,t.segments.length-o.UNSAFE_LIVE_SEGMENTS)),e.createTimeRange(s,n)):e.createTimeRange()},o.duration=i,o.seekable=r,e.Hls.Playlist=o}(window,window.videojs),function(t,e){"use strict";var i=e.Hls.resolveUrl,a=e.Hls.xhr,s=e.mergeOptions,n=function(t,e){var i,a,n=!1,o=s(t,{});for(i=t.playlists.length;i--;)if(a=o.playlists[i],a.uri===e.uri){if(a.segments&&e.segments&&a.segments.length===e.segments.length&&a.mediaSequence===e.mediaSequence)continue;o.playlists[i]=s(a,e),o.playlists[e.uri]=o.playlists[i],a.segments&&(o.playlists[i].segments=r(a.segments,e.segments,e.mediaSequence-a.mediaSequence)),n=!0}return n?o:null},r=function(t,e,i){var a,n,r=e.slice();for(i=i||0,a=Math.min(t.length,e.length+i),n=i;a>n;n++)r[n-i]=s(t[n],r[n-i]);return r},o=function(s,r){var d,h,u,c,p,f=this;if(o.prototype.init.call(this),this.trackExpiredTime_=!1,!s)throw new Error("A non-empty playlist URL is required");c=function(t,e,i){f.setBandwidth(u||t),u=null,i&&(f.state=i),f.error={playlist:f.master.playlists[e],status:t.status,message:"HLS playlist request error at URL: "+e,responseText:t.responseText,code:t.status>=500?4:2},f.trigger("error")},p=function(i,a){var s,r,o;f.setBandwidth(u||i),u=null,f.state="HAVE_METADATA",s=new e.m3u8.Parser,s.push(i.responseText),s.end(),s.manifest.uri=a,o=n(f.master,s.manifest),r=1e3*(s.manifest.targetDuration||10),o?(f.master=o,f.updateMediaPlaylist_(s.manifest)):r/=2,f.media().endList||(t.clearTimeout(h),h=t.setTimeout((function(){f.trigger("mediaupdatetimeout")}),r)),f.trigger("loadedplaylist")},f.state="HAVE_NOTHING",this.expired_=0,d=this.dispose,f.dispose=function(){u&&(u.onreadystatechange=null,u.abort(),u=null),t.clearTimeout(h),d.call(this)},f.media=function(t){var e,s=f.state;if(!t)return f.media_;if("HAVE_NOTHING"===f.state)throw new Error("Cannot switch media playlist from "+f.state);if("string"==typeof t){if(!f.master.playlists[t])throw new Error("Unknown playlist URI: "+t);t=f.master.playlists[t]}if(e=!f.media_||t.uri!==f.media_.uri,f.master.playlists[t.uri].endList)return u&&(u.onreadystatechange=null,u.abort(),u=null),f.state="HAVE_METADATA",f.media_=t,void(e&&f.trigger("mediachange"));if(e){if(f.state="SWITCHING_MEDIA",u){if(i(f.master.uri,t.uri)===u.url)return;u.onreadystatechange=null,u.abort(),u=null}u=a({uri:i(f.master.uri,t.uri),withCredentials:r},(function(e,i){return e?c(i,t.uri,s):(p(i,t.uri),void("HAVE_MASTER"===s?f.trigger("loadedmetadata"):f.trigger("mediachange")))}))}},f.setBandwidth=function(t){f.bandwidth=t.bandwidth},f.on("firstplay",(function(){this.trackExpiredTime_=!0})),f.on("mediaupdatetimeout",(function(){"HAVE_METADATA"===f.state&&(f.state="HAVE_CURRENT_METADATA",u=a({uri:i(f.master.uri,f.media().uri),withCredentials:r},(function(t,e){return t?c(e,f.media().uri):void p(e,f.media().uri)})))})),u=a({uri:s,withCredentials:r},(function(i,a){var n,r;if(u=null,i)return f.error={status:a.status,message:"HLS playlist request error at URL: "+s,responseText:a.responseText,code:2},f.trigger("error");if(n=new e.m3u8.Parser,n.push(a.responseText),n.end(),f.state="HAVE_MASTER",n.manifest.uri=s,n.manifest.playlists){for(f.master=n.manifest,r=f.master.playlists.length;r--;)f.master.playlists[f.master.playlists[r].uri]=f.master.playlists[r];return f.trigger("loadedplaylist"),void(u||f.media(n.manifest.playlists[0]))}return f.master={uri:t.location.href,playlists:[{uri:s}]},f.master.playlists[s]=f.master.playlists[0],p(a,s),f.trigger("loadedmetadata")}))};o.prototype=new e.Hls.Stream,o.prototype.updateMediaPlaylist_=function(t){var e,i,a;if(e=this.media_,this.media_=this.master.playlists[t.uri],e&&this.trackExpiredTime_&&t.uri===e.uri){if(t.segments.length){if(void 0!==t.segments[0].start)return void(this.expired_=t.segments[0].start);if(void 0!==t.segments[0].end)return void(this.expired_=t.segments[0].end-t.segments[0].duration)}for(i=t.mediaSequence-e.mediaSequence-1;i>=0;i--)if(a=e.segments[i]){if(void 0!==a.end)return void(this.expired_=a.end);if(void 0!==a.start)return void(this.expired_=a.start+a.duration);this.expired_+=a.duration}else this.expired_+=e.targetDuration||10}},o.prototype.getMediaIndexForTime_=function(t){var e,i,a,s,n,r,o=t,d=this.media_.segments.length,h=d-1;if(!this.media_)return 0;if(0>t)return 0;for(e=0;d>e;e++)if(i=this.media_.segments[e],i.end){if(i.end>t){r=i.end,s=e;break}n=i.end,a=e+1}if(void 0!==a){for(t-=n,e=a;(s||d)>e;e++)if(i=this.media_.segments[e],t-=i.duration,0>t)return e;return e>=s?a+Math.floor((o-n)/(r-n)*(s-a)):h}if(void 0!==s){for(t=r-t,e=s;e>=0;e--)if(i=this.media_.segments[e],t-=i.duration,0>t)return e;return 0===t?0:-1}if(t-=this.expired_,0>t)return-1;for(e=0;d>e;e++)if(i=this.media_.segments[e],t-=i.duration,0>t)return e;return h},e.Hls.PlaylistLoader=o}(window,window.videojs),function t(e,i,a){function s(r,o){if(!i[r]){if(!e[r]){var d="function"==typeof require&&require;if(!o&&d)return d(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+r+"'")}var h=i[r]={exports:{}};e[r][0].call(h.exports,(function(t){var i=e[r][1][t];return s(i||t)}),h,h.exports,t,e,i,a)}return i[r].exports}for(var n="function"==typeof require&&require,r=0;r<a.length;r++)s(a[r]);return s}({1:[function(t,e,i){(function(e){e.window.pkcs7={unpad:t("./unpad")}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./unpad":2}],2:[function(t,e,i){"use strict";e.exports=function(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}]},{},[1]),function(t,e,i){"use strict";var a,s,n,r,o;o=function(t){return t<<24|(65280&t)<<8|(16711680&t)>>8|t>>>24},a=function(t){this._precompute();var e,i,a,s,n,r=this._tables[0][4],o=this._tables[1],d=t.length,h=1;if(4!==d&&6!==d&&8!==d)throw new Error("Invalid aes key size");for(s=t.slice(0),n=[],this._key=[s,n],e=d;4*d+28>e;e++)a=s[e-1],(e%d===0||8===d&&e%d===4)&&(a=r[a>>>24]<<24^r[a>>16&255]<<16^r[a>>8&255]<<8^r[255&a],e%d===0&&(a=a<<8^a>>>24^h<<24,h=h<<1^283*(h>>7))),s[e]=s[e-d]^a;for(i=0;e;i++,e--)a=s[3&i?e:e-4],n[i]=4>=e||4>i?a:o[0][r[a>>>24]]^o[1][r[a>>16&255]]^o[2][r[a>>8&255]]^o[3][r[255&a]]},a.prototype={_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var t,e,i,a,s,n,r,o,d,h=this._tables[0],u=this._tables[1],c=h[4],p=u[4],f=[],l=[];for(t=0;256>t;t++)l[(f[t]=t<<1^283*(t>>7))^t]=t;for(e=i=0;!c[e];e^=a||1,i=l[i]||1)for(r=i^i<<1^i<<2^i<<3^i<<4,r=r>>8^255&r^99,c[e]=r,p[r]=e,n=f[s=f[a=f[e]]],d=16843009*n^65537*s^257*a^16843008*e,o=257*f[r]^16843008*r,t=0;4>t;t++)h[t][e]=o=o<<24^o>>>8,u[t][r]=d=d<<24^d>>>8;for(t=0;5>t;t++)h[t]=h[t].slice(0),u[t]=u[t].slice(0)},decrypt:function(t,e,i,a,s,n){var r,o,d,h,u=this._key[1],c=t^u[0],p=a^u[1],f=i^u[2],l=e^u[3],g=u.length/4-2,m=4,b=this._tables[1],y=b[0],_=b[1],v=b[2],S=b[3],T=b[4];for(h=0;g>h;h++)r=y[c>>>24]^_[p>>16&255]^v[f>>8&255]^S[255&l]^u[m],o=y[p>>>24]^_[f>>16&255]^v[l>>8&255]^S[255&c]^u[m+1],d=y[f>>>24]^_[l>>16&255]^v[c>>8&255]^S[255&p]^u[m+2],l=y[l>>>24]^_[c>>16&255]^v[p>>8&255]^S[255&f]^u[m+3],m+=4,c=r,p=o,f=d;for(h=0;4>h;h++)s[(3&-h)+n]=T[c>>>24]<<24^T[p>>16&255]<<16^T[f>>8&255]<<8^T[255&l]^u[m++],r=c,c=p,p=f,f=l,l=r}},r=function(t,e,i){var s,n,r,d,h,u,c,p,f,l=new Int32Array(t.buffer,t.byteOffset,t.byteLength>>2),g=new a(Array.prototype.slice.call(e)),m=new Uint8Array(t.byteLength),b=new Int32Array(m.buffer);for(s=i[0],n=i[1],r=i[2],d=i[3],f=0;f<l.length;f+=4)h=o(l[f]),u=o(l[f+1]),c=o(l[f+2]),p=o(l[f+3]),g.decrypt(h,u,c,p,b,f),b[f]=o(b[f]^s),b[f+1]=o(b[f+1]^n),b[f+2]=o(b[f+2]^r),b[f+3]=o(b[f+3]^d),s=h,n=u,r=c,d=p;return m},s=function(){this.jobs=[],this.delay=1,this.timeout_=null},s.prototype=new e.Hls.Stream,s.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},s.prototype.push=function(t){this.jobs.push(t),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},n=function(t,e,a,r){var d=n.STEP,h=new Int32Array(t.buffer),u=new Uint8Array(t.byteLength),c=0;for(this.asyncStream_=new s,this.asyncStream_.push(this.decryptChunk_(h.subarray(c,c+d),e,a,u)),c=d;c<h.length;c+=d)a=new Uint32Array([o(h[c-4]),o(h[c-3]),o(h[c-2]),o(h[c-1])]),this.asyncStream_.push(this.decryptChunk_(h.subarray(c,c+d),e,a,u));this.asyncStream_.push((function(){r(null,i(u))}))},n.prototype=new e.Hls.Stream,n.prototype.decryptChunk_=function(t,e,i,a){return function(){var s=r(t,e,i);a.set(s,t.byteOffset)}},n.STEP=32e3,e.Hls.decrypt=r,e.Hls.Decrypter=n,e.Hls.AsyncStream=s}(window,window.videojs,window.pkcs7.unpad);