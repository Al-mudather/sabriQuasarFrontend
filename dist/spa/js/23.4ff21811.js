(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{3876:function(e,t,s){"use strict";s.r(t);var o=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("AccountHeader",{attrs:{prevRoute:e.prevRoute,dialogName:e.$t("إنشاء حساب جديد")}},[s("div",{staticClass:"signup"},[s("div",{staticClass:"row q-ma-md q-pt-xl justify-center"},[s("GoogleAuthentication",{staticClass:"col-11 q-ma-sm",attrs:{label:e.googleLabel,prevRoute:e.prevRoute}}),s("FacebookAuthentication",{staticClass:"col-11 q-ma-sm",attrs:{label:e.facebookLabel,prevRoute:e.prevRoute}})],1),s("q-inner-loading",{attrs:{showing:e.visible}},[s("q-spinner-hourglass",{attrs:{color:"primary",size:"70px"}})],1)],1)])},i=[],a=(s("ddb0"),s("ded3")),r=s.n(a),n=s("9530"),l=s.n(n);let p,u=e=>e;const c=l()(p||(p=u`
mutation RegisterNewUser($email:String!, $fullName: String!, $password1: String!, $password2: String!){
  register(
    email: $email,
    fullName: $fullName,
    password1: $password1,
    password2: $password2,
  ) {
    success,
    errors,
    token,
    refreshToken
  }
}
`));var g=s("0595"),m=s("2f62"),h=s("ab5e"),d=s("26eb"),f=s("0705"),w={data(){return{facebookLabel:"إنشاء حساب جديد بإستخدام FACEBOOK",googleLabel:"إنشاء حساب جديد بإستخدام Google",visible:!1,prevRoute:null,fullName:"",email:"",password1:"",password2:"",errorMessages:[]}},components:{AccountHeader:h["a"],GoogleAuthentication:d["a"],FacebookAuthentication:f["a"]},beforeRouteEnter(e,t,s){s((e=>{e.prevRoute=t.fullPath}))},methods:r()(r()({},Object(m["b"])("authentication",["loginAction","setSignUpDialogAction","setRegisterationDialogAction","SET_USER_DATA_ACTION"])),{},{errorHandler(e){console.log(e);for(const t in e)for(const s of e[t])this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:s.message})},async REGISTER_NEW_USER(e){e.preventDefault();try{if(this.fullName&&this.email&&this.password1)if(this.password1===this.password2){this.visible=!0,this.errorMessages=[];const e=await this.$apollo.mutate({mutation:c,variables:{email:this.email,fullName:this.fullName,password1:this.password1,password2:this.password2}});if(e.data.register.success){const t={token:e.data.register.token,refresh:e.data.register.refreshToken};this.loginAction(t).then((()=>{try{this.$apollo.query({query:g["a"]}).then((e=>{this.SET_USER_DATA_ACTION(e.data.me),this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("يجب ان تقوم بتفعيل حسابك الإلكتروني")})}))}catch(e){}})),this.GotToConfirmationPage()}else e.data.register.errors&&(this.visible=!1,this.errorHandler(e.data.register.errors))}else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"passwords are not the same"});else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"All Fields are required"})}catch(t){"GraphQL error: UNIQUE constraint failed: account_manager_user.email"===t.message?this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("هذا الحساب مسجل مسبقا")}):this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"There were some errors please try again latter"}),this.visible=!1}},GotToConfirmationPage(){this.$router.push({name:"password-confirm"})}})},b=w,$=(s("9914"),s("2877")),v=s("74f7"),y=s("9149"),A=s("eebe"),R=s.n(A),q=Object($["a"])(b,o,i,!1,null,null,null);t["default"]=q.exports;R()(q,"components",{QInnerLoading:v["a"],QSpinnerHourglass:y["a"]})},9914:function(e,t,s){"use strict";s("c4741")},c4741:function(e,t,s){}}]);