(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{3876:function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("AccountHeader",{attrs:{prevRoute:e.prevRoute,dialogName:e.$t("إنشاء حساب جديد")}},[s("div",{staticClass:"signup"},[s("div",{staticClass:"row q-ma-md q-pt-xl justify-center"},[s("GoogleAuthentication",{staticClass:"col-11 q-ma-sm",attrs:{label:e.googleLabel,prevRoute:e.prevRoute}})],1),s("div",{staticClass:"text-center textStyle  q-mb-md",staticStyle:{cursor:"pointer"},on:{click:e.GO_TO_THE_TERMS_AND_CONDETIONS_PAGE}},[e._v("\n            "+e._s(e.isEnglish?"By using the platform, you agree to the terms and conditions of the platform":"بإستخدامك للمنصه فانت توافق على شروط و احكام المنصه")+"\n        ")]),s("q-inner-loading",{attrs:{showing:e.visible}},[s("q-spinner-hourglass",{attrs:{color:"primary",size:"70px"}})],1)],1)])},o=[],r=(s("ddb0"),s("9530")),a=s.n(r);let n,l=e=>e;const p=a()(n||(n=l`
mutation RegisterNewUser($email:String!, $fullName: String!, $password1: String!, $password2: String!){
  register(
    email: $email,
    fullName: $fullName,
    password1: $password1,
    password2: $password2,
  ) {
    success,
    errors,
    token,
    refreshToken
  }
}
`));var g=s("0595"),u=s("2f62"),c=s("ab5e"),h=s("26eb"),m={data(){return{facebookLabel:"إنشاء حساب جديد بإستخدام FACEBOOK",googleLabel:"إنشاء حساب جديد بإستخدام Google",visible:!1,prevRoute:null,fullName:"",email:"",password1:"",password2:"",errorMessages:[]}},components:{AccountHeader:c["a"],GoogleAuthentication:h["a"]},beforeRouteEnter(e,t,s){s((e=>{e.prevRoute=t.fullPath}))},mounted(){this.isEnglish?(this.facebookLabel="SignUp using Facebook",this.googleLabel="SignUp using Google"):(this.facebookLabel="إنشاء حساب جديد بإستخدام FACEBOOK",this.googleLabel="إنشاء حساب جديد بإستخدام Google")},computed:{...Object(u["d"])("settings",["isEnglish"])},methods:{...Object(u["b"])("authentication",["loginAction","setSignUpDialogAction","setRegisterationDialogAction","SET_USER_DATA_ACTION"]),GO_TO_THE_TERMS_AND_CONDETIONS_PAGE(){this.$router.push({name:"termsAndConditions"})},errorHandler(e){console.log(e);for(const t in e)for(const s of e[t])this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:s.message})},async REGISTER_NEW_USER(e){e.preventDefault();try{if(this.fullName&&this.email&&this.password1)if(this.password1===this.password2){this.visible=!0,this.errorMessages=[];const e=await this.$apollo.mutate({mutation:p,variables:{email:this.email,fullName:this.fullName,password1:this.password1,password2:this.password2}});if(e.data.register.success){const t={token:e.data.register.token,refresh:e.data.register.refreshToken};this.loginAction(t).then((()=>{try{this.$apollo.query({query:g["a"]}).then((e=>{this.SET_USER_DATA_ACTION(e.data.me),this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("يجب ان تقوم بتفعيل حسابك الإلكتروني")})}))}catch(e){}})),this.GotToConfirmationPage()}else e.data.register.errors&&(this.visible=!1,this.errorHandler(e.data.register.errors))}else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"passwords are not the same"});else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"All Fields are required"})}catch(t){"GraphQL error: UNIQUE constraint failed: account_manager_user.email"===t.message?this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("هذا الحساب مسجل مسبقا")}):this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"There were some errors please try again latter"}),this.visible=!1}},GotToConfirmationPage(){this.$router.push({name:"password-confirm"})}}},d=m,f=(s("9914"),s("2877")),w=s("74f7"),b=s("9149"),_=s("eebe"),y=s.n(_),E=Object(f["a"])(d,i,o,!1,null,null,null);t["default"]=E.exports;y()(E,"components",{QInnerLoading:w["a"],QSpinnerHourglass:b["a"]})},9914:function(e,t,s){"use strict";s("c4741")},c4741:function(e,t,s){}}]);