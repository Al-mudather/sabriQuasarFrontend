(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{3876:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("AccountHeader",{attrs:{prevRoute:e.prevRoute,dialogName:e.$t("إنشاء حساب جديد")}},[t("div",{staticClass:"signup"},[t("div",{staticClass:"row q-ma-md q-pt-xl justify-center"},[t("GoogleAuthentication",{staticClass:"col-11 q-ma-sm",attrs:{label:e.googleLabel,prevRoute:e.prevRoute}})],1),t("q-inner-loading",{attrs:{showing:e.visible}},[t("q-spinner-hourglass",{attrs:{color:"primary",size:"70px"}})],1)],1)])},r=[],o=(t("ddb0"),t("9530")),a=t.n(o);let n,l=e=>e;const p=a()(n||(n=l`
mutation RegisterNewUser($email:String!, $fullName: String!, $password1: String!, $password2: String!){
  register(
    email: $email,
    fullName: $fullName,
    password1: $password1,
    password2: $password2,
  ) {
    success,
    errors,
    token,
    refreshToken
  }
}
`));var g=t("0595"),u=t("2f62"),c=t("ab5e"),m=t("26eb"),h={data(){return{facebookLabel:"إنشاء حساب جديد بإستخدام FACEBOOK",googleLabel:"إنشاء حساب جديد بإستخدام Google",visible:!1,prevRoute:null,fullName:"",email:"",password1:"",password2:"",errorMessages:[]}},components:{AccountHeader:c["a"],GoogleAuthentication:m["a"]},beforeRouteEnter(e,s,t){t((e=>{e.prevRoute=s.fullPath}))},methods:{...Object(u["b"])("authentication",["loginAction","setSignUpDialogAction","setRegisterationDialogAction","SET_USER_DATA_ACTION"]),errorHandler(e){console.log(e);for(const s in e)for(const t of e[s])this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:t.message})},async REGISTER_NEW_USER(e){e.preventDefault();try{if(this.fullName&&this.email&&this.password1)if(this.password1===this.password2){this.visible=!0,this.errorMessages=[];const e=await this.$apollo.mutate({mutation:p,variables:{email:this.email,fullName:this.fullName,password1:this.password1,password2:this.password2}});if(e.data.register.success){const s={token:e.data.register.token,refresh:e.data.register.refreshToken};this.loginAction(s).then((()=>{try{this.$apollo.query({query:g["a"]}).then((e=>{this.SET_USER_DATA_ACTION(e.data.me),this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("يجب ان تقوم بتفعيل حسابك الإلكتروني")})}))}catch(e){}})),this.GotToConfirmationPage()}else e.data.register.errors&&(this.visible=!1,this.errorHandler(e.data.register.errors))}else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"passwords are not the same"});else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"All Fields are required"})}catch(s){"GraphQL error: UNIQUE constraint failed: account_manager_user.email"===s.message?this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("هذا الحساب مسجل مسبقا")}):this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"There were some errors please try again latter"}),this.visible=!1}},GotToConfirmationPage(){this.$router.push({name:"password-confirm"})}}},d=h,f=(t("9914"),t("2877")),w=t("74f7"),b=t("9149"),$=t("eebe"),y=t.n($),v=Object(f["a"])(d,i,r,!1,null,null,null);s["default"]=v.exports;y()(v,"components",{QInnerLoading:w["a"],QSpinnerHourglass:b["a"]})},9914:function(e,s,t){"use strict";t("c4741")},c4741:function(e,s,t){}}]);