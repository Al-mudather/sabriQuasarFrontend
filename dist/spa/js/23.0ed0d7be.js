(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{3876:function(t,s,e){"use strict";e.r(s);var a=function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("AccountHeader",{attrs:{prevRoute:t.prevRoute,dialogName:t.$t("إنشاء حساب جديد")}},[a("div",{staticClass:"signup"},[a("div",{staticClass:"logBy"},[a("FacebookAuthentication",{staticClass:"hvr-pulse-grow"}),a("GoogleAuthentication",{staticClass:"hvr-pulse-grow"})],1),a("form",{on:{submit:function(s){return t.REGISTER_NEW_USER(s)}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-lg-12 col-xs-12"},[a("div",{staticClass:"inp"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.fullName,expression:"fullName"}],staticClass:"input",attrs:{id:"fullName",type:"text",placeholder:t.$t("الاسم الحقيقي")},domProps:{value:t.fullName},on:{input:function(s){s.target.composing||(t.fullName=s.target.value)}}})]),a("div",{staticClass:"inp"},[a("img",{attrs:{src:e("98c0"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"input",attrs:{id:"regEmail",type:"email",placeholder:t.$t("الإيميل")},domProps:{value:t.email},on:{input:function(s){s.target.composing||(t.email=s.target.value)}}})]),a("div",{staticClass:"inp"},[a("img",{attrs:{src:e("c119"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password1,expression:"password1"}],staticClass:"input",attrs:{id:"regPassword",type:"password",placeholder:t.$t("كلمة المرور")},domProps:{value:t.password1},on:{input:function(s){s.target.composing||(t.password1=s.target.value)}}}),a("img",{staticClass:"closee",attrs:{src:e("7da9"),alt:""}})]),a("div",{staticClass:"inp"},[a("img",{attrs:{src:e("c119"),alt:""}}),a("input",{directives:[{name:"model",rawName:"v-model",value:t.password2,expression:"password2"}],staticClass:"input",attrs:{id:"regPassword2",type:"password",placeholder:t.$t("إعادة كلمة المرور")},domProps:{value:t.password2},on:{input:function(s){s.target.composing||(t.password2=s.target.value)}}})])])]),a("div",{staticClass:"next"},[a("button",{staticClass:"action_btn",staticStyle:{outline:"none",border:"none",background:"transparent","box-shadow":"none",cursor:"pointer"},attrs:{type:"submit",id:"siginUpAction"}},[a("svg",{staticClass:"nexx neex_1",attrs:{xmlns:"http://www.w3.org/2000/svg",width:"61.667",height:"54",viewBox:"0 0 61.667 54"}},[a("g",{attrs:{id:"Group_363","data-name":"Group 363",transform:"translate(0 54)"}},[a("path",{attrs:{id:"Path_55","data-name":"Path 595",d:"M61.667-27A23.678,23.678,0,0,0,38-50.667H28.333A23.678,23.678,0,0,0,4.667-27,23.678,23.678,0,0,0,28.333-3.333H38A23.678,23.678,0,0,0,61.667-27Z",fill:"#fbc74b","fill-rule":"evenodd"}}),a("path",{attrs:{id:"Path_56","data-name":"Path 596",d:"M28.333-1.333,27,0A27.013,27.013,0,0,1,0-27,27.013,27.013,0,0,1,27-54l1.333,1.333A25.679,25.679,0,0,0,2.667-27,25.679,25.679,0,0,0,28.333-1.333Z",fill:"#fbc74b","fill-rule":"evenodd"}})])]),a("img",{attrs:{src:e("1faf"),alt:""}})])])]),a("q-inner-loading",{attrs:{showing:t.visible}},[a("q-spinner-hourglass",{attrs:{color:"primary",size:"70px"}})],1)],1)])},i=[],o=(e("ddb0"),e("ded3")),r=e.n(o),n=e("9530"),l=e.n(n);let p,c=t=>t;const d=l()(p||(p=c`
mutation RegisterNewUser($email:String!, $fullName: String!, $password1: String!, $password2: String!){
  register(
    email: $email,
    fullName: $fullName,
    password1: $password1,
    password2: $password2,
  ) {
    success,
    errors,
    token,
    refreshToken
  }
}
`));var u=e("0595"),m=e("2f62"),g=e("ab5e"),h=e("26eb"),w=e("0705"),f={data(){return{visible:!1,prevRoute:null,fullName:"",email:"",password1:"",password2:"",errorMessages:[]}},components:{AccountHeader:g["a"],GoogleAuthentication:h["a"],FacebookAuthentication:w["a"]},beforeRouteEnter(t,s,e){e((t=>{t.prevRoute=s.fullPath}))},methods:r()(r()({},Object(m["b"])("authentication",["loginAction","setSignUpDialogAction","setRegisterationDialogAction","SET_USER_DATA_ACTION"])),{},{errorHandler(t){console.log(t);for(const s in t)for(const e of t[s])this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:e.message})},async REGISTER_NEW_USER(t){t.preventDefault();try{if(this.fullName&&this.email&&this.password1)if(this.password1===this.password2){this.visible=!0,this.errorMessages=[];const t=await this.$apollo.mutate({mutation:d,variables:{email:this.email,fullName:this.fullName,password1:this.password1,password2:this.password2}});if(t.data.register.success){const s={token:t.data.register.token,refresh:t.data.register.refreshToken};this.loginAction(s).then((()=>{try{this.$apollo.query({query:u["a"]}).then((t=>{this.SET_USER_DATA_ACTION(t.data.me),this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("يجب ان تقوم بتفعيل حسابك الإلكتروني")})}))}catch(t){console.log("333333333333333333333333"),console.log(t.message),console.log("333333333333333333333333")}})),this.GotToConfirmationPage()}else t.data.register.errors&&(this.visible=!1,this.errorHandler(t.data.register.errors))}else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"passwords are not the same"});else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"All Fields are required"})}catch(s){"GraphQL error: UNIQUE constraint failed: account_manager_user.email"===s.message?this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("هذا الحساب مسجل مسبقا")}):this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"There were some errors please try again latter"}),this.visible=!1}},GotToConfirmationPage(){this.$router.push({name:"password-confirm"})}})},v=f,b=(e("9914"),e("2877")),y=e("74f7"),$=e("9149"),A=e("eebe"),N=e.n(A),C=Object(b["a"])(v,a,i,!1,null,null,null);s["default"]=C.exports;N()(C,"components",{QInnerLoading:y["a"],QSpinnerHourglass:$["a"]})},9914:function(t,s,e){"use strict";e("c4741")},c4741:function(t,s,e){}}]);