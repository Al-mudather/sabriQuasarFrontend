(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[23],{3876:function(e,s,t){"use strict";t.r(s);var i=function(){var e=this,s=e._self._c;return s("AccountHeader",{attrs:{prevRoute:e.prevRoute,dialogName:e.$t("إنشاء حساب جديد")}},[s("div",{staticClass:"signup"},[s("div",{staticClass:"row q-ma-md q-pt-xl justify-center"},[s("GoogleAuthentication",{staticClass:"col-11 q-ma-sm",attrs:{label:e.googleLabel,prevRoute:e.prevRoute}})],1),s("div",{staticClass:"text-center textStyle q-mb-md",staticStyle:{cursor:"pointer"},on:{click:e.GO_TO_THE_TERMS_AND_CONDETIONS_PAGE}},[e._v("\n            "+e._s(e.isEnglish?"By using the platform, you agree to the terms and conditions of the platform":"بإستخدامك للمنصه فانت توافق على شروط و احكام المنصه")+"\n        ")]),s("q-inner-loading",{attrs:{showing:e.visible}},[s("q-spinner-hourglass",{attrs:{color:"primary",size:"70px"}})],1)],1)])},o=[],r=(t("14d9"),t("ddb0"),t("5184"));const a=r["a"]`
mutation RegisterNewUser($email:String!, $fullName: String!, $password1: String!, $password2: String!){
  register(
    email: $email,
    fullName: $fullName,
    password1: $password1,
    password2: $password2,
  ) {
    success,
    errors,
    token,
    refreshToken
  }
}
`;var n=t("0595"),l=t("2f62"),p=t("ab5e"),g=t("26eb"),u={data(){return{facebookLabel:"إنشاء حساب جديد بإستخدام FACEBOOK",googleLabel:"إنشاء حساب جديد بإستخدام Google",visible:!1,prevRoute:null,fullName:"",email:"",password1:"",password2:"",errorMessages:[]}},components:{AccountHeader:p["a"],GoogleAuthentication:g["a"]},beforeRouteEnter(e,s,t){t((e=>{e.prevRoute=s.fullPath}))},mounted(){this.isEnglish?(this.facebookLabel="SignUp using Facebook",this.googleLabel="SignUp using Google"):(this.facebookLabel="إنشاء حساب جديد بإستخدام FACEBOOK",this.googleLabel="إنشاء حساب جديد بإستخدام Google")},computed:{...Object(l["d"])("settings",["isEnglish"])},methods:{...Object(l["b"])("authentication",["loginAction","setSignUpDialogAction","setRegisterationDialogAction","SET_USER_DATA_ACTION"]),GO_TO_THE_TERMS_AND_CONDETIONS_PAGE(){this.$router.push({name:"termsAndConditions"})},errorHandler(e){console.log(e);for(const s in e)for(const t of e[s])this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:t.message})},async REGISTER_NEW_USER(e){e.preventDefault();try{if(this.fullName&&this.email&&this.password1)if(this.password1===this.password2){this.visible=!0,this.errorMessages=[];const e=await this.$apollo.mutate({mutation:a,variables:{email:this.email,fullName:this.fullName,password1:this.password1,password2:this.password2}});if(e.data.register.success){const s={token:e.data.register.token,refresh:e.data.register.refreshToken};this.loginAction(s).then((()=>{try{this.$apollo.query({query:n["a"]}).then((e=>{this.SET_USER_DATA_ACTION(e.data.me),this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("يجب ان تقوم بتفعيل حسابك الإلكتروني")})}))}catch(e){}})),this.GotToConfirmationPage()}else e.data.register.errors&&(this.visible=!1,this.errorHandler(e.data.register.errors))}else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"passwords are not the same"});else this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"All Fields are required"})}catch(s){"GraphQL error: UNIQUE constraint failed: account_manager_user.email"===s.message?this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:this.$t("هذا الحساب مسجل مسبقا")}):this.$q.notify({type:"warning",progress:!0,multiLine:!0,position:"top",message:"There were some errors please try again latter"}),this.visible=!1}},GotToConfirmationPage(){this.$router.push({name:"password-confirm"})}}},c=u,h=(t("4a18"),t("2877")),m=t("74f7"),d=t("9149"),f=t("eebe"),w=t.n(f),b=Object(h["a"])(c,i,o,!1,null,null,null);s["default"]=b.exports;w()(b,"components",{QInnerLoading:m["a"],QSpinnerHourglass:d["a"]})},"4a18":function(e,s,t){"use strict";t("cb3d")},cb3d:function(e,s,t){}}]);